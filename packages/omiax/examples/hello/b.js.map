{"version":3,"file":"b.js","sources":["../../src/layout/layout.js","../../src/layout/layout-node.js","../../src/omis/vnode.js","../../src/mock/util.js","../../src/mock/element.js","../../src/mock/document.js","../../src/mock/index.js","../../src/omis/options.js","../../src/omis/style.js","../../src/omis/h.js","../../src/omis/util.js","../../src/omis/clone-element.js","../../src/omis/constants.js","../../src/omis/render-queue.js","../../src/omis/vdom/index.js","../../src/omis/dom/index.js","../../src/omis/vdom/diff.js","../../src/omis/vdom/component-recycler.js","../../src/omis/vdom/component.js","../../src/omis/component.js","../../src/omis/obaa.js","../../src/omis/render.js","../../src/omis/define.js","../../src/omis/omis.js","../../src/render.js","../../src/index.js","main.js"],"sourcesContent":["// https://github.com/facebook/css-layout\n\n/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\nvar computeLayout = (function() {\n\n  function capitalizeFirst(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  function getSpacing(node, type, suffix, location) {\n    var key = type + capitalizeFirst(location) + suffix;\n    if (key in node.style) {\n      return node.style[key];\n    }\n\n    key = type + suffix;\n    if (key in node.style) {\n      return node.style[key];\n    }\n\n    return 0;\n  }\n\n  function getPositiveSpacing(node, type, suffix, location) {\n    var key = type + capitalizeFirst(location) + suffix;\n    if (key in node.style && node.style[key] >= 0) {\n      return node.style[key];\n    }\n\n    key = type + suffix;\n    if (key in node.style && node.style[key] >= 0) {\n      return node.style[key];\n    }\n\n    return 0;\n  }\n\n  function isUndefined(value) {\n    return value === undefined;\n  }\n\n  function getMargin(node, location) {\n    return getSpacing(node, 'margin', '', location);\n  }\n\n  function getPadding(node, location) {\n    return getPositiveSpacing(node, 'padding', '', location);\n  }\n\n  function getBorder(node, location) {\n    return getPositiveSpacing(node, 'border', 'Width', location);\n  }\n\n  function getPaddingAndBorder(node, location) {\n    return getPadding(node, location) + getBorder(node, location);\n  }\n\n  function getMarginAxis(node, axis) {\n    return getMargin(node, leading[axis]) + getMargin(node, trailing[axis]);\n  }\n\n  function getPaddingAndBorderAxis(node, axis) {\n    return getPaddingAndBorder(node, leading[axis]) + getPaddingAndBorder(node, trailing[axis]);\n  }\n\n  function getJustifyContent(node) {\n    if ('justifyContent' in node.style) {\n      return node.style.justifyContent;\n    }\n    return 'flex-start';\n  }\n\n  function getAlignItem(node, child) {\n    if ('alignSelf' in child.style) {\n      return child.style.alignSelf;\n    }\n    if ('alignItems' in node.style) {\n      return node.style.alignItems;\n    }\n    return 'stretch';\n  }\n\n  function getFlexDirection(node) {\n    if ('flexDirection' in node.style) {\n      return node.style.flexDirection;\n    }\n    return 'column';\n  }\n\n  function getPositionType(node) {\n    if ('position' in node.style) {\n      return node.style.position;\n    }\n    return 'relative';\n  }\n\n  function getFlex(node) {\n    return node.style.flex;\n  }\n\n  function isFlex(node) {\n    return (\n      getPositionType(node) === CSS_POSITION_RELATIVE &&\n      getFlex(node) > 0\n    );\n  }\n\n  function isFlexWrap(node) {\n    return node.style.flexWrap === 'wrap';\n  }\n\n  function getDimWithMargin(node, axis) {\n    return node.layout[dim[axis]] + getMarginAxis(node, axis);\n  }\n\n  function isDimDefined(node, axis) {\n    return !isUndefined(node.style[dim[axis]]) && node.style[dim[axis]] >= 0;\n  }\n\n  function isPosDefined(node, pos) {\n    return !isUndefined(node.style[pos]);\n  }\n\n  function isMeasureDefined(node) {\n    return 'measure' in node.style;\n  }\n\n  function getPosition(node, pos) {\n    if (pos in node.style) {\n      return node.style[pos];\n    }\n    return 0;\n  }\n\n  // When the user specifically sets a value for width or height\n  function setDimensionFromStyle(node, axis) {\n    // The parent already computed us a width or height. We just skip it\n    if (!isUndefined(node.layout[dim[axis]])) {\n      return;\n    }\n    // We only run if there's a width or height defined\n    if (!isDimDefined(node, axis)) {\n      return;\n    }\n\n    // The dimensions can never be smaller than the padding and border\n    node.layout[dim[axis]] = fmaxf(\n      node.style[dim[axis]],\n      getPaddingAndBorderAxis(node, axis)\n    );\n  }\n\n  // If both left and right are defined, then use left. Otherwise return\n  // +left or -right depending on which is defined.\n  function getRelativePosition(node, axis) {\n    if (leading[axis] in node.style) {\n      return getPosition(node, leading[axis]);\n    }\n    return -getPosition(node, trailing[axis]);\n  }\n\n  var leading = {\n    row: 'left',\n    column: 'top'\n  };\n  var trailing = {\n    row: 'right',\n    column: 'bottom'\n  };\n  var pos = {\n    row: 'left',\n    column: 'top'\n  };\n  var dim = {\n    row: 'width',\n    column: 'height'\n  };\n\n  function fmaxf(a, b) {\n    if (a > b) {\n      return a;\n    }\n    return b;\n  }\n\n  var CSS_UNDEFINED = undefined;\n\n  var CSS_FLEX_DIRECTION_ROW = 'row';\n  var CSS_FLEX_DIRECTION_COLUMN = 'column';\n\n  var CSS_JUSTIFY_FLEX_START = 'flex-start';\n  var CSS_JUSTIFY_CENTER = 'center';\n  var CSS_JUSTIFY_FLEX_END = 'flex-end';\n  var CSS_JUSTIFY_SPACE_BETWEEN = 'space-between';\n  var CSS_JUSTIFY_SPACE_AROUND = 'space-around';\n\n  var CSS_ALIGN_FLEX_START = 'flex-start';\n  var CSS_ALIGN_CENTER = 'center';\n  var CSS_ALIGN_FLEX_END = 'flex-end';\n  var CSS_ALIGN_STRETCH = 'stretch';\n\n  var CSS_POSITION_RELATIVE = 'relative';\n  var CSS_POSITION_ABSOLUTE = 'absolute';\n\n  return function layoutNode(node, parentMaxWidth) {\n    var/*css_flex_direction_t*/ mainAxis = getFlexDirection(node);\n    var/*css_flex_direction_t*/ crossAxis = mainAxis === CSS_FLEX_DIRECTION_ROW ?\n      CSS_FLEX_DIRECTION_COLUMN :\n      CSS_FLEX_DIRECTION_ROW;\n\n    // Handle width and height style attributes\n    setDimensionFromStyle(node, mainAxis);\n    setDimensionFromStyle(node, crossAxis);\n\n    // The position is set by the parent, but we need to complete it with a\n    // delta composed of the margin and left/top/right/bottom\n    node.layout[leading[mainAxis]] += getMargin(node, leading[mainAxis]) +\n      getRelativePosition(node, mainAxis);\n    node.layout[leading[crossAxis]] += getMargin(node, leading[crossAxis]) +\n      getRelativePosition(node, crossAxis);\n\n    if (isMeasureDefined(node)) {\n      var/*float*/ width = CSS_UNDEFINED;\n      if (isDimDefined(node, CSS_FLEX_DIRECTION_ROW)) {\n        width = node.style.width;\n      } else if (!isUndefined(node.layout[dim[CSS_FLEX_DIRECTION_ROW]])) {\n        width = node.layout[dim[CSS_FLEX_DIRECTION_ROW]];\n      } else {\n        width = parentMaxWidth -\n          getMarginAxis(node, CSS_FLEX_DIRECTION_ROW);\n      }\n      width -= getPaddingAndBorderAxis(node, CSS_FLEX_DIRECTION_ROW);\n\n      // We only need to give a dimension for the text if we haven't got any\n      // for it computed yet. It can either be from the style attribute or because\n      // the element is flexible.\n      var/*bool*/ isRowUndefined = !isDimDefined(node, CSS_FLEX_DIRECTION_ROW) &&\n        isUndefined(node.layout[dim[CSS_FLEX_DIRECTION_ROW]]);\n      var/*bool*/ isColumnUndefined = !isDimDefined(node, CSS_FLEX_DIRECTION_COLUMN) &&\n        isUndefined(node.layout[dim[CSS_FLEX_DIRECTION_COLUMN]]);\n\n      // Let's not measure the text if we already know both dimensions\n      if (isRowUndefined || isColumnUndefined) {\n        var/*css_dim_t*/ measure_dim = node.style.measure(\n          /*(c)!node->context,*/\n          width\n        );\n        if (isRowUndefined) {\n          node.layout.width = measure_dim.width +\n            getPaddingAndBorderAxis(node, CSS_FLEX_DIRECTION_ROW);\n        }\n        if (isColumnUndefined) {\n          node.layout.height = measure_dim.height +\n            getPaddingAndBorderAxis(node, CSS_FLEX_DIRECTION_COLUMN);\n        }\n      }\n      return;\n    }\n\n    // Pre-fill some dimensions straight from the parent\n    for (var/*int*/ i = 0; i < node.children.length; ++i) {\n      var/*css_node_t**/ child = node.children[i];\n      // Pre-fill cross axis dimensions when the child is using stretch before\n      // we call the recursive layout pass\n      if (getAlignItem(node, child) === CSS_ALIGN_STRETCH &&\n          getPositionType(child) === CSS_POSITION_RELATIVE &&\n          !isUndefined(node.layout[dim[crossAxis]]) &&\n          !isDimDefined(child, crossAxis)) {\n        child.layout[dim[crossAxis]] = fmaxf(\n          node.layout[dim[crossAxis]] -\n            getPaddingAndBorderAxis(node, crossAxis) -\n            getMarginAxis(child, crossAxis),\n          // You never want to go smaller than padding\n          getPaddingAndBorderAxis(child, crossAxis)\n        );\n      } else if (getPositionType(child) == CSS_POSITION_ABSOLUTE) {\n        // Pre-fill dimensions when using absolute position and both offsets for the axis are defined (either both\n        // left and right or top and bottom).\n        for (var/*int*/ ii = 0; ii < 2; ii++) {\n          var/*css_flex_direction_t*/ axis = (ii != 0) ? CSS_FLEX_DIRECTION_ROW : CSS_FLEX_DIRECTION_COLUMN;\n          if (!isUndefined(node.layout[dim[axis]]) &&\n              !isDimDefined(child, axis) &&\n              isPosDefined(child, leading[axis]) &&\n              isPosDefined(child, trailing[axis])) {\n            child.layout[dim[axis]] = fmaxf(\n              node.layout[dim[axis]] -\n              getPaddingAndBorderAxis(node, axis) -\n              getMarginAxis(child, axis) -\n              getPosition(child, leading[axis]) -\n              getPosition(child, trailing[axis]),\n              // You never want to go smaller than padding\n              getPaddingAndBorderAxis(child, axis)\n            );\n          }\n        }\n      }\n    }\n\n    var/*float*/ definedMainDim = CSS_UNDEFINED;\n    if (!isUndefined(node.layout[dim[mainAxis]])) {\n      definedMainDim = node.layout[dim[mainAxis]] -\n          getPaddingAndBorderAxis(node, mainAxis);\n    }\n\n    // We want to execute the next two loops one per line with flex-wrap\n    var/*int*/ startLine = 0;\n    var/*int*/ endLine = 0;\n    var/*int*/ nextOffset = 0;\n    var/*int*/ alreadyComputedNextLayout = 0;\n    // We aggregate the total dimensions of the container in those two variables\n    var/*float*/ linesCrossDim = 0;\n    var/*float*/ linesMainDim = 0;\n    while (endLine < node.children.length) {\n      // <Loop A> Layout non flexible children and count children by type\n\n      // mainContentDim is accumulation of the dimensions and margin of all the\n      // non flexible children. This will be used in order to either set the\n      // dimensions of the node if none already exist, or to compute the\n      // remaining space left for the flexible children.\n      var/*float*/ mainContentDim = 0;\n\n      // There are three kind of children, non flexible, flexible and absolute.\n      // We need to know how many there are in order to distribute the space.\n      var/*int*/ flexibleChildrenCount = 0;\n      var/*float*/ totalFlexible = 0;\n      var/*int*/ nonFlexibleChildrenCount = 0;\n      for (var/*int*/ i = startLine; i < node.children.length; ++i) {\n        var/*css_node_t**/ child = node.children[i];\n        var/*float*/ nextContentDim = 0;\n\n        // It only makes sense to consider a child flexible if we have a computed\n        // dimension for the node.\n        if (!isUndefined(node.layout[dim[mainAxis]]) && isFlex(child)) {\n          flexibleChildrenCount++;\n          totalFlexible += getFlex(child);\n\n          // Even if we don't know its exact size yet, we already know the padding,\n          // border and margin. We'll use this partial information to compute the\n          // remaining space.\n          nextContentDim = getPaddingAndBorderAxis(child, mainAxis) +\n            getMarginAxis(child, mainAxis);\n\n        } else {\n          var/*float*/ maxWidth = CSS_UNDEFINED;\n          if (mainAxis === CSS_FLEX_DIRECTION_ROW) {\n            // do nothing\n          } else if (isDimDefined(node, CSS_FLEX_DIRECTION_ROW)) {\n            maxWidth = node.layout[dim[CSS_FLEX_DIRECTION_ROW]] -\n              getPaddingAndBorderAxis(node, CSS_FLEX_DIRECTION_ROW);\n          } else {\n            maxWidth = parentMaxWidth -\n              getMarginAxis(node, CSS_FLEX_DIRECTION_ROW) -\n              getPaddingAndBorderAxis(node, CSS_FLEX_DIRECTION_ROW);\n          }\n\n          // This is the main recursive call. We layout non flexible children.\n          if (alreadyComputedNextLayout === 0) {\n            layoutNode(child, maxWidth);\n          }\n\n          // Absolute positioned elements do not take part of the layout, so we\n          // don't use them to compute mainContentDim\n          if (getPositionType(child) === CSS_POSITION_RELATIVE) {\n            nonFlexibleChildrenCount++;\n            // At this point we know the final size and margin of the element.\n            nextContentDim = getDimWithMargin(child, mainAxis);\n          }\n        }\n\n        // The element we are about to add would make us go to the next line\n        if (isFlexWrap(node) &&\n            !isUndefined(node.layout[dim[mainAxis]]) &&\n            mainContentDim + nextContentDim > definedMainDim &&\n            // If there's only one element, then it's bigger than the content\n            // and needs its own line\n            i !== startLine) {\n          alreadyComputedNextLayout = 1;\n          break;\n        }\n        alreadyComputedNextLayout = 0;\n        mainContentDim += nextContentDim;\n        endLine = i + 1;\n      }\n\n      // <Loop B> Layout flexible children and allocate empty space\n\n      // In order to position the elements in the main axis, we have two\n      // controls. The space between the beginning and the first element\n      // and the space between each two elements.\n      var/*float*/ leadingMainDim = 0;\n      var/*float*/ betweenMainDim = 0;\n\n      // The remaining available space that needs to be allocated\n      var/*float*/ remainingMainDim = 0;\n      if (!isUndefined(node.layout[dim[mainAxis]])) {\n        remainingMainDim = definedMainDim - mainContentDim;\n      } else {\n        remainingMainDim = fmaxf(mainContentDim, 0) - mainContentDim;\n      }\n\n      // If there are flexible children in the mix, they are going to fill the\n      // remaining space\n      if (flexibleChildrenCount !== 0) {\n        var/*float*/ flexibleMainDim = remainingMainDim / totalFlexible;\n\n        // The non flexible children can overflow the container, in this case\n        // we should just assume that there is no space available.\n        if (flexibleMainDim < 0) {\n          flexibleMainDim = 0;\n        }\n        // We iterate over the full array and only apply the action on flexible\n        // children. This is faster than actually allocating a new array that\n        // contains only flexible children.\n        for (var/*int*/ i = startLine; i < endLine; ++i) {\n          var/*css_node_t**/ child = node.children[i];\n          if (isFlex(child)) {\n            // At this point we know the final size of the element in the main\n            // dimension\n            child.layout[dim[mainAxis]] = flexibleMainDim * getFlex(child) +\n              getPaddingAndBorderAxis(child, mainAxis);\n\n            var/*float*/ maxWidth = CSS_UNDEFINED;\n            if (mainAxis === CSS_FLEX_DIRECTION_ROW) {\n              // do nothing\n            } else if (isDimDefined(node, CSS_FLEX_DIRECTION_ROW)) {\n              maxWidth = node.layout[dim[CSS_FLEX_DIRECTION_ROW]] -\n                getPaddingAndBorderAxis(node, CSS_FLEX_DIRECTION_ROW);\n            } else {\n              maxWidth = parentMaxWidth -\n                getMarginAxis(node, CSS_FLEX_DIRECTION_ROW) -\n                getPaddingAndBorderAxis(node, CSS_FLEX_DIRECTION_ROW);\n            }\n\n            // And we recursively call the layout algorithm for this child\n            layoutNode(child, maxWidth);\n          }\n        }\n\n      // We use justifyContent to figure out how to allocate the remaining\n      // space available\n      } else {\n        var/*css_justify_t*/ justifyContent = getJustifyContent(node);\n        if (justifyContent === CSS_JUSTIFY_FLEX_START) {\n          // Do nothing\n        } else if (justifyContent === CSS_JUSTIFY_CENTER) {\n          leadingMainDim = remainingMainDim / 2;\n        } else if (justifyContent === CSS_JUSTIFY_FLEX_END) {\n          leadingMainDim = remainingMainDim;\n        } else if (justifyContent === CSS_JUSTIFY_SPACE_BETWEEN) {\n          remainingMainDim = fmaxf(remainingMainDim, 0);\n          if (flexibleChildrenCount + nonFlexibleChildrenCount - 1 !== 0) {\n            betweenMainDim = remainingMainDim /\n              (flexibleChildrenCount + nonFlexibleChildrenCount - 1);\n          } else {\n            betweenMainDim = 0;\n          }\n        } else if (justifyContent === CSS_JUSTIFY_SPACE_AROUND) {\n          // Space on the edges is half of the space between elements\n          betweenMainDim = remainingMainDim /\n            (flexibleChildrenCount + nonFlexibleChildrenCount);\n          leadingMainDim = betweenMainDim / 2;\n        }\n      }\n\n      // <Loop C> Position elements in the main axis and compute dimensions\n\n      // At this point, all the children have their dimensions set. We need to\n      // find their position. In order to do that, we accumulate data in\n      // variables that are also useful to compute the total dimensions of the\n      // container!\n      var/*float*/ crossDim = 0;\n      var/*float*/ mainDim = leadingMainDim +\n        getPaddingAndBorder(node, leading[mainAxis]);\n\n      for (var/*int*/ i = startLine; i < endLine; ++i) {\n        var/*css_node_t**/ child = node.children[i];\n\n        if (getPositionType(child) === CSS_POSITION_ABSOLUTE &&\n            isPosDefined(child, leading[mainAxis])) {\n          // In case the child is position absolute and has left/top being\n          // defined, we override the position to whatever the user said\n          // (and margin/border).\n          child.layout[pos[mainAxis]] = getPosition(child, leading[mainAxis]) +\n            getBorder(node, leading[mainAxis]) +\n            getMargin(child, leading[mainAxis]);\n        } else {\n          // If the child is position absolute (without top/left) or relative,\n          // we put it at the current accumulated offset.\n          child.layout[pos[mainAxis]] += mainDim;\n        }\n\n        // Now that we placed the element, we need to update the variables\n        // We only need to do that for relative elements. Absolute elements\n        // do not take part in that phase.\n        if (getPositionType(child) === CSS_POSITION_RELATIVE) {\n          // The main dimension is the sum of all the elements dimension plus\n          // the spacing.\n          mainDim += betweenMainDim + getDimWithMargin(child, mainAxis);\n          // The cross dimension is the max of the elements dimension since there\n          // can only be one element in that cross dimension.\n          crossDim = fmaxf(crossDim, getDimWithMargin(child, crossAxis));\n        }\n      }\n\n      var/*float*/ containerMainAxis = node.layout[dim[mainAxis]];\n      // If the user didn't specify a width or height, and it has not been set\n      // by the container, then we set it via the children.\n      if (isUndefined(node.layout[dim[mainAxis]])) {\n        containerMainAxis = fmaxf(\n          // We're missing the last padding at this point to get the final\n          // dimension\n          mainDim + getPaddingAndBorder(node, trailing[mainAxis]),\n          // We can never assign a width smaller than the padding and borders\n          getPaddingAndBorderAxis(node, mainAxis)\n        );\n      }\n\n      var/*float*/ containerCrossAxis = node.layout[dim[crossAxis]];\n      if (isUndefined(node.layout[dim[crossAxis]])) {\n        containerCrossAxis = fmaxf(\n          // For the cross dim, we add both sides at the end because the value\n          // is aggregate via a max function. Intermediate negative values\n          // can mess this computation otherwise\n          crossDim + getPaddingAndBorderAxis(node, crossAxis),\n          getPaddingAndBorderAxis(node, crossAxis)\n        );\n      }\n\n      // <Loop D> Position elements in the cross axis\n\n      for (var/*int*/ i = startLine; i < endLine; ++i) {\n        var/*css_node_t**/ child = node.children[i];\n\n        if (getPositionType(child) === CSS_POSITION_ABSOLUTE &&\n            isPosDefined(child, leading[crossAxis])) {\n          // In case the child is absolutely positionned and has a\n          // top/left/bottom/right being set, we override all the previously\n          // computed positions to set it correctly.\n          child.layout[pos[crossAxis]] = getPosition(child, leading[crossAxis]) +\n            getBorder(node, leading[crossAxis]) +\n            getMargin(child, leading[crossAxis]);\n\n        } else {\n          var/*float*/ leadingCrossDim = getPaddingAndBorder(node, leading[crossAxis]);\n\n          // For a relative children, we're either using alignItems (parent) or\n          // alignSelf (child) in order to determine the position in the cross axis\n          if (getPositionType(child) === CSS_POSITION_RELATIVE) {\n            var/*css_align_t*/ alignItem = getAlignItem(node, child);\n            if (alignItem === CSS_ALIGN_FLEX_START) {\n              // Do nothing\n            } else if (alignItem === CSS_ALIGN_STRETCH) {\n              // You can only stretch if the dimension has not already been set\n              // previously.\n              if (!isDimDefined(child, crossAxis)) {\n                child.layout[dim[crossAxis]] = fmaxf(\n                  containerCrossAxis -\n                    getPaddingAndBorderAxis(node, crossAxis) -\n                    getMarginAxis(child, crossAxis),\n                  // You never want to go smaller than padding\n                  getPaddingAndBorderAxis(child, crossAxis)\n                );\n              }\n            } else {\n              // The remaining space between the parent dimensions+padding and child\n              // dimensions+margin.\n              var/*float*/ remainingCrossDim = containerCrossAxis -\n                getPaddingAndBorderAxis(node, crossAxis) -\n                getDimWithMargin(child, crossAxis);\n\n              if (alignItem === CSS_ALIGN_CENTER) {\n                leadingCrossDim += remainingCrossDim / 2;\n              } else { // CSS_ALIGN_FLEX_END\n                leadingCrossDim += remainingCrossDim;\n              }\n            }\n          }\n\n          // And we apply the position\n          child.layout[pos[crossAxis]] += linesCrossDim + leadingCrossDim;\n        }\n      }\n\n      linesCrossDim += crossDim;\n      linesMainDim = fmaxf(linesMainDim, mainDim);\n      startLine = endLine;\n    }\n\n    // If the user didn't specify a width or height, and it has not been set\n    // by the container, then we set it via the children.\n    if (isUndefined(node.layout[dim[mainAxis]])) {\n      node.layout[dim[mainAxis]] = fmaxf(\n        // We're missing the last padding at this point to get the final\n        // dimension\n        linesMainDim + getPaddingAndBorder(node, trailing[mainAxis]),\n        // We can never assign a width smaller than the padding and borders\n        getPaddingAndBorderAxis(node, mainAxis)\n      );\n    }\n\n    if (isUndefined(node.layout[dim[crossAxis]])) {\n      node.layout[dim[crossAxis]] = fmaxf(\n        // For the cross dim, we add both sides at the end because the value\n        // is aggregate via a max function. Intermediate negative values\n        // can mess this computation otherwise\n        linesCrossDim + getPaddingAndBorderAxis(node, crossAxis),\n        getPaddingAndBorderAxis(node, crossAxis)\n      );\n    }\n\n    // <Loop E> Calculate dimensions for absolutely positioned elements\n\n    for (var/*int*/ i = 0; i < node.children.length; ++i) {\n      var/*css_node_t**/ child = node.children[i];\n      if (getPositionType(child) == CSS_POSITION_ABSOLUTE) {\n        // Pre-fill dimensions when using absolute position and both offsets for the axis are defined (either both\n        // left and right or top and bottom).\n        for (var/*int*/ ii = 0; ii < 2; ii++) {\n          var/*css_flex_direction_t*/ axis = (ii !== 0) ? CSS_FLEX_DIRECTION_ROW : CSS_FLEX_DIRECTION_COLUMN;\n          if (!isUndefined(node.layout[dim[axis]]) &&\n              !isDimDefined(child, axis) &&\n              isPosDefined(child, leading[axis]) &&\n              isPosDefined(child, trailing[axis])) {\n            child.layout[dim[axis]] = fmaxf(\n              node.layout[dim[axis]] -\n              getPaddingAndBorderAxis(node, axis) -\n              getMarginAxis(child, axis) -\n              getPosition(child, leading[axis]) -\n              getPosition(child, trailing[axis]),\n              // You never want to go smaller than padding\n              getPaddingAndBorderAxis(child, axis)\n            );\n          }\n        }\n        for (var/*int*/ ii = 0; ii < 2; ii++) {\n          var/*css_flex_direction_t*/ axis = (ii !== 0) ? CSS_FLEX_DIRECTION_ROW : CSS_FLEX_DIRECTION_COLUMN;\n          if (isPosDefined(child, trailing[axis]) &&\n              !isPosDefined(child, leading[axis])) {\n            child.layout[leading[axis]] =\n              node.layout[dim[axis]] -\n              child.layout[dim[axis]] -\n              getPosition(child, trailing[axis]);\n          }\n        }\n      }\n    }\n  };\n})();\n\nexport default computeLayout","// https://github.com/Flipboard/react-canvas\n\n/**\nCopyright (c) 2015, Flipboard\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice, this\n  list of conditions and the following disclaimer in the documentation and/or\n  other materials provided with the distribution.\n\n* Neither the name of Flipboard nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n'use strict';\n\nimport  computeLayout  from './layout';\n\n/**\n * This computes the CSS layout for a RenderLayer tree and mutates the frame\n * objects at each node.\n *\n * @param {Renderlayer} root\n * @return {Object}\n */\nfunction layoutNode (root) {\n  var rootNode = createNode(root);\n  computeLayout(rootNode);\n  walkNode(rootNode);\n  return rootNode;\n}\n\nfunction createNode (layer) {\n  return {\n    layer: layer,\n    layout: {\n      width: undefined, // computeLayout will mutate\n      height: undefined, // computeLayout will mutate\n      top: 0,\n      left: 0,\n    },\n    style: layer.style || (layer.attributes && layer.attributes.style) || {},\n    children: (layer.children || []).map(createNode)\n  };\n}\n\nfunction walkNode (node, parentLeft, parentTop) {\n  node.layer.frame.x = node.layout.left + (parentLeft || 0);\n  node.layer.frame.y = node.layout.top + (parentTop || 0);\n  node.layer.frame.width = node.layout.width;\n  node.layer.frame.height = node.layout.height;\n  if (node.children && node.children.length > 0) {\n    node.children.forEach(function (child) {\n      walkNode(child, node.layer.frame.x, node.layer.frame.y);\n    });\n  }\n}\n\nexport default layoutNode;","/**\n * Virtual DOM Node\n * @typedef VNode\n * @property {string | function} nodeName The string of the DOM node to create or Component constructor to render\n * @property {Array<VNode | string>} children The children of node\n * @property {string | number | undefined} key The key used to identify this VNode in a list\n * @property {object} attributes The properties of this VNode\n */\nexport const VNode = function VNode() {};\n","let nodeId = 1\nexport function uniqueId() {\n  return nodeId++\n}\n\nlet docMap = {}\n\nexport function addDoc(id, doc) {\n  docMap[id] = doc\n}\n\nexport function getDoc(id) {\n  return docMap[id]\n}\n\nexport function removeDoc(id) {\n  delete docMap[id]\n}\n\nlet sendBridgeFlag = {}\n\nexport function getSendBridgeFlag() {\n  return sendBridgeFlag\n}\n\nexport function setSendBridgeFlag(docId, flag) {\n  return (sendBridgeFlag[docId] = flag)\n}\n\nexport function insertIndex(target, list, newIndex) {\n  if (newIndex < 0) {\n    newIndex = 0\n  }\n  const before = list[newIndex - 1]\n  const after = list[newIndex]\n  list.splice(newIndex, 0, target)\n\n  before && (before.nextSibling = target)\n  target.previousSibling = before\n  target.nextSibling = after\n  after && (after.previousSibling = target)\n\n  return newIndex\n}\n\nexport function moveIndex(target, list, newIndex) {\n  const index = list.indexOf(target)\n\n  if (index < 0) {\n    return -1\n  }\n\n  const before = list[index - 1]\n  const after = list[index + 1]\n  before && (before.nextSibling = after)\n  after && (after.previousSibling = before)\n\n  list.splice(index, 1)\n  let newIndexAfter = newIndex\n  if (index <= newIndex) {\n    newIndexAfter = newIndex - 1\n  }\n  const beforeNew = list[newIndexAfter - 1]\n  const afterNew = list[newIndexAfter]\n  list.splice(newIndexAfter, 0, target)\n\n  beforeNew && (beforeNew.nextSibling = target)\n  target.previousSibling = beforeNew\n  target.nextSibling = afterNew\n  afterNew && (afterNew.previousSibling = target)\n\n  if (index === newIndexAfter) {\n    return -1\n  }\n  return newIndex\n}\n\nexport function removeIndex(target, list, changeSibling) {\n  const index = list.indexOf(target)\n\n  if (index < 0) {\n    return\n  }\n  if (changeSibling) {\n    const before = list[index - 1]\n    const after = list[index + 1]\n    before && (before.nextSibling = after)\n    after && (after.previousSibling = before)\n  }\n  list.splice(index, 1)\n}\n\nexport function remove(target, list) {\n  const index = list.indexOf(target)\n\n  if (index < 0) {\n    return\n  }\n\n  const before = list[index - 1]\n  const after = list[index + 1]\n  before && (before.nextSibling = after)\n  after && (after.previousSibling = before)\n\n  list.splice(index, 1)\n}\n\nexport function linkParent(node, parent) {\n  node.parentNode = parent\n  if (parent.docId) {\n    node.docId = parent.docId\n    node.ownerDocument = parent.ownerDocument\n    node.ownerDocument.nodeMap[node.nodeId] = node\n    node.depth = parent.depth + 1\n\t}\n\n  node.childNodes && node.childNodes.forEach(child => {\n    linkParent(child, node)\n  })\n}\n\nexport function nextElement(node) {\n  while (node) {\n    if (node.nodeType === 1) {\n      return node\n    }\n    node = node.nextSibling\n  }\n}\n\nexport function previousElement(node) {\n  while (node) {\n    if (node.nodeType === 1) {\n      return node\n    }\n    node = node.previousSibling\n  }\n}\n","import {\n\tgetDoc,\n\tuniqueId,\n\tlinkParent,\n\tinsertIndex,\n\tmoveIndex,\n\tremoveIndex\n} from './util'\n\nconst displayMap = {\n\tdiv: 'block',\n\tspan: 'inline-block'\n}\n\nfunction registerNode(docId, node) {\n\tconst doc = getDoc(docId)\n\tdoc.nodeMap[node.nodeId] = node\n}\n\nexport default class Element {\n\tconstructor(type) {\n\t\tthis.nodeType = 1\n\t\tthis.nodeId = uniqueId()\n\t\tthis.ref = this.nodeId\n\t\tthis.type = type\n\t\tthis.attributes = {}\n\t\tthis.style = {\n\t\t\tdisplay: displayMap[type]\n\t\t}\n\t\tthis.classStyle = {}\n\t\tthis.event = {}\n\t\tthis.childNodes = []\n\n\t\tthis.nodeName = this.type\n\n\t\tthis.parentNode = null\n\t\tthis.nextSibling = null\n\t\tthis.previousSibling = null\n\t\tthis.firstChild = null\n\t}\n\n\tappendChild(node) {\n\t\tif (!node.parentNode) {\n\t\t\tlinkParent(node, this)\n\t\t\tinsertIndex(node, this.childNodes, this.childNodes.length, true)\n\n\t\t\tif (this.docId != undefined) {\n\t\t\t\tregisterNode(this.docId, node)\n\t\t\t}\n\n\n\t\t\t//this.ownerDocument.addElement(this.ref, node.toJSON(), -1)\n\n\t\t} else {\n\t\t\tnode.parentNode.removeChild(node)\n\n\t\t\tthis.appendChild(node)\n\n\t\t\treturn\n\t\t}\n\n\t\tthis.firstChild = this.childNodes[0]\n\n\n\t}\n\n\tinsertBefore(node, before) {\n\t\tif (!node.parentNode) {\n\t\t\tlinkParent(node, this)\n\t\t\tconst index = insertIndex(\n\t\t\t\tnode,\n\t\t\t\tthis.childNodes,\n\t\t\t\tthis.childNodes.indexOf(before),\n\t\t\t\ttrue\n\t\t\t)\n\t\t\tif (this.docId != undefined) {\n\t\t\t\tregisterNode(this.docId, node)\n\t\t\t}\n\n\n\t\t\t//this.ownerDocument.addElement(this.ref, node.toJSON(), index)\n\n\t\t} else {\n\t\t\tnode.parentNode.removeChild(node)\n\t\t\tthis.insertBefore(node, before)\n\t\t\treturn\n\t\t}\n\n\t\tthis.firstChild = this.childNodes[0]\n\t}\n\n\tinsertAfter(node, after) {\n\t\tif (node.parentNode && node.parentNode !== this) {\n\t\t\treturn\n\t\t}\n\t\tif (\n\t\t\tnode === after ||\n\t\t\t(node.previousSibling && node.previousSibling === after)\n\t\t) {\n\t\t\treturn\n\t\t}\n\t\tif (!node.parentNode) {\n\t\t\tlinkParent(node, this)\n\t\t\tconst index = insertIndex(\n\t\t\t\tnode,\n\t\t\t\tthis.childNodes,\n\t\t\t\tthis.childNodes.indexOf(after) + 1,\n\t\t\t\ttrue\n\t\t\t)\n\n\t\t\tif (this.docId != undefined) {\n\t\t\t\tregisterNode(this.docId, node)\n\t\t\t}\n\n\t\t\t//this.ownerDocument.addElement(this.ref, node.toJSON(), index)\n\n\t\t} else {\n\t\t\tconst index = moveIndex(\n\t\t\t\tnode,\n\t\t\t\tthis.childNodes,\n\t\t\t\tthis.childNodes.indexOf(after) + 1\n\t\t\t)\n\n\t\t\t//this.ownerDocument.moveElement(node.ref, this.ref, index)\n\n\t\t}\n\n\t\tthis.firstChild = this.childNodes[0]\n\t}\n\n\tremoveChild(node) {\n\t\tif (node.parentNode) {\n\t\t\tremoveIndex(node, this.childNodes, true)\n\n\n\t\t\tthis.ownerDocument.removeElement(node.ref)\n\n\t\t}\n\n\t\tnode.parentNode = null\n\n\n\n\t\tthis.firstChild = this.childNodes[0]\n\t}\n\n\tsetAttribute(key, value, silent) {\n\t\tif (this.attributes[key] === value && silent !== false) {\n\t\t\treturn\n\t\t}\n\t\tthis.attributes[key] = value\n\t\tif (!silent) {\n\t\t\tconst result = {}\n\t\t\tresult[key] = value\n\n\t\t\t//this.ownerDocument.setAttr(this.ref, result)\n\n\t\t}\n\t}\n\n\tremoveAttribute(key) {\n\t\tif (this.attributes[key]) {\n\t\t\tdelete this.attributes[key]\n\t\t}\n\t}\n\n\tsetStyle(key, value, silent) {\n\t\tif (this.style[key] === value && silent !== false) {\n\t\t\treturn\n\t\t}\n\t\tthis.style[key] = value\n\t\tif (!silent && this.ownerDocument) {\n\t\t\tconst result = {}\n\t\t\tresult[key] = value\n\n\t\t\tthis.ownerDocument.setStyles(this.ref, result)\n\n\t\t}\n\t}\n\n\tsetStyles(styles) {\n\t\tObject.assign(this.style, styles)\n\t\tif (this.ownerDocument) {\n\n\t\t\tthis.ownerDocument.setStyles(this.ref, styles)\n\n\t\t}\n\t}\n\n\tsetClassStyle(classStyle) {\n\t\tfor (const key in this.classStyle) {\n\t\t\tthis.classStyle[key] = ''\n\t\t}\n\n\t\tObject.assign(this.classStyle, classStyle)\n\n\n\t\tthis.ownerDocument.setStyles(this.ref, this.toStyle())\n\n\t}\n\n\taddEventListener(type, handler) {\n\t\tif (!this.event[type]) {\n\t\t\tthis.event[type] = handler\n\n\t\t\t//this.ownerDocument.addEvent(this.ref, type)\n\t\t}\n\t}\n\n\tremoveEventListener(type) {\n\t\tif (this.event[type]) {\n\t\t\tdelete this.event[type]\n\t\t\tlet doc = getDoc(this.docId)\n\t\t\tdoc.nodeMap[this.ref] &&\n\t\t\t\tdoc.nodeMap[this.ref].event &&\n\t\t\t\tdoc.nodeMap[this.ref].event[type]\n\t\t\t\t? (doc.nodeMap[this.ref].event[type] = null)\n\t\t\t\t: ''\n\n\t\t\tthis.ownerDocument.removeEvent(this.ref, type)\n\t\t}\n\t}\n\n\tfireEvent(type, e) {\n\t\tconst handler = this.event[type]\n\t\tif (handler) {\n\t\t\treturn handler.call(this, e)\n\t\t}\n\t}\n\n\ttoStyle() {\n\t\treturn Object.assign({}, this.classStyle, this.style)\n\t}\n\n\tgetComputedStyle() { }\n\n\ttoJSON() {\n\t\tlet result = {\n\t\t\tid: this.ref,\n\t\t\ttype: this.type,\n\t\t\tdocId: this.docId || -10000,\n\t\t\tattributes: this.attributes ? this.attributes : {}\n\t\t}\n\t\tresult.attributes.style = this.toStyle()\n\n\t\tconst event = Object.keys(this.event)\n\t\tif (event.length) {\n\t\t\tresult.event = event\n\t\t}\n\n\t\tif (this.childNodes.length) {\n\t\t\tresult.children = this.childNodes.map(child => child.toJSON())\n\t\t}\n\t\treturn result\n\t}\n\n\treplaceChild(newChild, oldChild) {\n\t\tthis.insertBefore(newChild, oldChild)\n\t\tthis.removeChild(oldChild)\n\t}\n\n\tdestroy() {\n\t\tconst doc = getDoc(this.docId)\n\n\t\tif (doc) {\n\t\t\tdelete doc.nodeMap[this.nodeId]\n\t\t}\n\n\t\tthis.parentNode = null\n\t\tthis.childNodes.forEach(child => {\n\t\t\tchild.destroy()\n\t\t})\n\t}\n}\n","import Element from './element'\nimport { addDoc, removeDoc } from './util'\n\n\nexport default class Document {\n  constructor(id) {\n    this.id = id\n    addDoc(id, this)\n    this.nodeMap = {}\n    this._isMockDocument = true\n  }\n\n  // createBody(type, props) {\n  //   if (!this.body) {\n  //     const el = new Element(type, props)\n  //     el.didMount = true\n  //     el.ownerDocument = this\n  //     el.docId = this.id\n  //     el.style.alignItems = 'flex-start'\n  //     this.body = el\n  //   }\n\n  //   return this.body\n  // }\n\n  createElement(tagName, props) {\n    let el = new Element(tagName, props)\n    el.ownerDocument = this\n    el.docId = this.id\n    return el\n\t}\n\n  destroy() {\n    delete this.listener\n    delete this.nodeMap\n    removeDoc(this.id)\n  }\n\n  addEventListener(ref, type) {\n    //document.addEvent(this.id, ref, type)\n  }\n\n  removeEventListener(ref, type) {\n    //document.removeEvent(this.id, ref, type)\n  }\n\n}\n","import Document from './document'\n\n\nexport default {\n\tdocument: new Document(0)\n}\n","import doc from '../mock/index'\n/**\n * @typedef {import('./component').Component} Component\n * @typedef {import('./vnode').VNode} VNode\n */\n\n/**\n * Global options\n * @public\n * @typedef Options\n * @property {boolean} [syncComponentUpdates] If `true`, `prop` changes trigger synchronous component updates. Defaults to true.\n * @property {(vnode: VNode) => void} [vnode] Processes all created VNodes.\n * @property {(component: Component) => void} [afterMount] Hook invoked after a component is mounted.\n * @property {(component: Component) => void} [afterUpdate] Hook invoked after the DOM is updated with a component's latest render.\n * @property {(component: Component) => void} [beforeUnmount] Hook invoked immediately before a component is unmounted.\n * @property {(rerender: function) => void} [debounceRendering] Hook invoked whenever a rerender is requested. Can be used to debounce rerenders.\n * @property {(event: Event) => Event | void} [event] Hook invoked before any Omi event listeners. The return value (if any) replaces the native browser event given to event listeners\n */\n\n/** @type {Options}  */\nconst options = {\n\trunTimeComponent: {},\n\tstyleCache: [],\n\tstaticStyleMapping: {},\n\tdocument: doc.document\n};\n\nexport default options;\n","import options from './options'\n\nlet styleId = 0\n\nexport function getCtorName(ctor) {\n  for (let i = 0, len = options.styleCache.length; i < len; i++) {\n    let item = options.styleCache[i]\n\n    if (item.ctor === ctor) {\n      return item.attrName\n    }\n  }\n\n  let attrName = '_ss' + styleId\n  options.styleCache.push({ ctor, attrName })\n  styleId++\n\n  return attrName\n}\n\n// many thanks to https://github.com/thomaspark/scoper/\nexport function scoper(css, prefix) {\n  prefix = '[' + prefix.toLowerCase() + ']'\n  // https://www.w3.org/TR/css-syntax-3/#lexical\n  css = css.replace(/\\/\\*[^*]*\\*+([^/][^*]*\\*+)*\\//g, '')\n  // eslint-disable-next-line\n    let re = new RegExp('([^\\r\\n,{}:]+)(:[^\\r\\n,{}]+)?(,(?=[^{}]*{)|\\s*{)', 'g')\n  /**\n   * Example:\n   *\n   * .classname::pesudo { color:red }\n   *\n   * g1 is normal selector `.classname`\n   * g2 is pesudo class or pesudo element\n   * g3 is the suffix\n   */\n  css = css.replace(re, (g0, g1, g2, g3) => {\n    if (typeof g2 === 'undefined') {\n      g2 = ''\n    }\n\n    /* eslint-ignore-next-line */\n    if (\n      g1.match(\n        /^\\s*(@media|\\d+%?|@-webkit-keyframes|@keyframes|to|from|@font-face)/\n      )\n    ) {\n      return g1 + g2 + g3\n    }\n\n    let appendClass = g1.replace(/(\\s*)$/, '') + prefix + g2\n    //let prependClass = prefix + ' ' + g1.trim() + g2;\n\n    return appendClass + g3\n    //return appendClass + ',' + prependClass + g3;\n  })\n\n  return css\n}\n\nexport function addStyle(cssText, id, parent) {\n  id = id.toLowerCase()\n  let ele = document.getElementById(id)\n  let head = parent || document.getElementsByTagName('head')[0]\n  if (ele && ele.parentNode === head) {\n    head.removeChild(ele)\n  }\n\n  let someThingStyles = document.createElement('style')\n  head.appendChild(someThingStyles)\n  someThingStyles.setAttribute('type', 'text/css')\n  someThingStyles.setAttribute('id', id)\n  if (window.ActiveXObject) {\n    someThingStyles.styleSheet.cssText = cssText\n  } else {\n    someThingStyles.textContent = cssText\n  }\n}\n\nexport function addStyleToHead(style, attr, parent) {\n  //parent is shadowroot\n\tif (parent || !options.staticStyleMapping[attr]) {\n    addStyle(scoper(style, attr), attr, parent)\n    //don't cache when is shadowroot\n    if(!parent){\n      options.staticStyleMapping[attr] = true\n    }\n\t}\n}\n","import { VNode } from './vnode';\nimport options from './options';\nimport {getCtorName} from './style'\n\nconst stack = [];\n\nconst EMPTY_CHILDREN = [];\n\n/**\n * JSX/hyperscript reviver.\n * @see http://jasonformat.com/wtf-is-jsx\n * Benchmarks: https://esbench.com/bench/57ee8f8e330ab09900a1a1a0\n *\n * Note: this is exported as both `h()` and `createElement()` for compatibility\n * reasons.\n *\n * Creates a VNode (virtual DOM element). A tree of VNodes can be used as a\n * lightweight representation of the structure of a DOM tree. This structure can\n * be realized by recursively comparing it against the current _actual_ DOM\n * structure, and applying only the differences.\n *\n * `h()`/`createElement()` accepts an element name, a list of attributes/props,\n * and optionally children to append to the element.\n *\n * @example The following DOM tree\n *\n * `<div id=\"foo\" name=\"bar\">Hello!</div>`\n *\n * can be constructed using this function as:\n *\n * `h('div', { id: 'foo', name : 'bar' }, 'Hello!');`\n *\n * @param {string | function} nodeName An element name. Ex: `div`, `a`, `span`, etc.\n * @param {object | null} attributes Any attributes/props to set on the created element.\n * @param {VNode[]} [rest] Additional arguments are taken to be children to\n *  append. Can be infinitely nested Arrays.\n *\n * @public\n */\nexport function h(nodeName, attributes) {\n\tlet children=EMPTY_CHILDREN, lastSimple, child, simple, i;\n\tfor (i=arguments.length; i-- > 2; ) {\n\t\tstack.push(arguments[i]);\n\t}\n\tif (attributes && attributes.children!=null) {\n\t\tif (!stack.length) stack.push(attributes.children);\n\t\tdelete attributes.children;\n\t}\n\tlet p = new VNode();\n\tif (nodeName !== 'text') {\n\t\twhile (stack.length) {\n\t\t\tif ((child = stack.pop()) && child.pop!==undefined) {\n\t\t\t\tfor (i=child.length; i--; ) stack.push(child[i]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (typeof child==='boolean') child = null;\n\n\t\t\t\tif ((simple = typeof nodeName!=='function')) {\n\t\t\t\t\tif (child==null) child = '';\n\t\t\t\t\telse if (typeof child==='number') child = String(child);\n\t\t\t\t\telse if (typeof child!=='string') simple = false;\n\t\t\t\t}\n\n\t\t\t\tif (simple && lastSimple) {\n\t\t\t\t\tchildren[children.length-1] += child;\n\t\t\t\t}\n\t\t\t\telse if (children===EMPTY_CHILDREN) {\n\t\t\t\t\tchildren = [child];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tchildren.push(child);\n\t\t\t\t}\n\n\t\t\t\tlastSimple = simple;\n\t\t\t}\n\t\t}\n\t}else {\n    p.value = stack.pop()\n  }\n\n\tp.frame = {\n    \"x\": 0,\n    \"y\": 0,\n    \"width\": 0,\n    \"height\": 0\n  }\n\tp.nodeName = nodeName;\n\tp.children = children;\n\tp.attributes = attributes==null ? {} : attributes;\n\n\n\tp.key = p.attributes.key;\n\n\t// if a \"vnode hook\" is defined, pass every created VNode to it\n\tif (options.vnode!==undefined) options.vnode(p);\n\n\treturn p;\n}\n","/**\n * Copy all properties from `props` onto `obj`.\n * @param {object} obj Object onto which properties should be copied.\n * @param {object} props Object from which to copy properties.\n * @returns {object}\n * @private\n */\nexport function extend(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn obj;\n}\n\n/** Invoke or update a ref, depending on whether it is a function or object ref.\n *  @param {object|function} [ref=null]\n *  @param {any} [value]\n */\nexport function applyRef(ref, value) {\n\tif (ref) {\n\t\tif (typeof ref=='function') ref(value);\n\t\telse ref.current = value;\n\t}\n}\n\n/**\n * Call a function asynchronously, as soon as possible. Makes\n * use of HTML Promise to schedule the callback if available,\n * otherwise falling back to `setTimeout` (mainly for IE<11).\n * @type {(callback: function) => void}\n */\nexport const defer = typeof Promise=='function' ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout;\n\nexport function getPath(obj) {\n  if (Object.prototype.toString.call(obj) === '[object Array]') {\n    const result = {}\n    obj.forEach(item => {\n      if (typeof item === 'string') {\n        result[item] = true\n      } else {\n        const tempPath = item[Object.keys(item)[0]]\n        if (typeof tempPath === 'string') {\n          result[tempPath] = true\n        } else {\n          if(typeof tempPath[0] === 'string'){\n            result[tempPath[0]] = true\n          }else{\n            tempPath[0].forEach(path => result[path] = true)\n          }\n        }\n      }\n\t\t})\n    return result\n  } else {\n    return getUpdatePath(obj)\n  }\n}\n\nexport function getUpdatePath(data) {\n  const result = {}\n  dataToPath(data, result)\n  return result\n}\n\nfunction dataToPath(data, result) {\n  Object.keys(data).forEach(key => {\n    result[key] = true\n    const type = Object.prototype.toString.call(data[key])\n    if (type === OBJECTTYPE) {\n      _objToPath(data[key], key, result)\n    } else if (type === ARRAYTYPE) {\n      _arrayToPath(data[key], key, result)\n    }\n  })\n}\n\nfunction _objToPath(data, path, result) {\n  Object.keys(data).forEach(key => {\n    result[path + '.' + key] = true\n    delete result[path]\n    const type = Object.prototype.toString.call(data[key])\n    if (type === OBJECTTYPE) {\n      _objToPath(data[key], path + '.' + key, result)\n    } else if (type === ARRAYTYPE) {\n      _arrayToPath(data[key], path + '.' + key, result)\n    }\n  })\n}\n\nfunction _arrayToPath(data, path, result) {\n  data.forEach((item, index) => {\n    result[path + '[' + index + ']'] = true\n    delete result[path]\n    const type = Object.prototype.toString.call(item)\n    if (type === OBJECTTYPE) {\n      _objToPath(item, path + '[' + index + ']', result)\n    } else if (type === ARRAYTYPE) {\n      _arrayToPath(item, path + '[' + index + ']', result)\n    }\n  })\n}\n\n\n\nexport function getUse(data, paths) {\n  const obj = []\n  paths.forEach((path, index) => {\n    const isPath = typeof path === 'string'\n    if (isPath) {\n      obj[index] = getTargetByPath(data, path)\n    } else {\n      const key = Object.keys(path)[0]\n      const value = path[key]\n      if (typeof value === 'string') {\n        obj[index] = getTargetByPath(data, value)\n      } else {\n        const tempPath = value[0]\n        if (typeof tempPath === 'string') {\n          const tempVal = getTargetByPath(data, tempPath)\n          obj[index] = value[1] ? value[1](tempVal) : tempVal\n        } else {\n          const args = []\n          tempPath.forEach(path =>{\n            args.push(getTargetByPath(data, path))\n          })\n          obj[index] = value[1].apply(null, args)\n        }\n      }\n      obj[key] = obj[index]\n    }\n  })\n  return obj\n}\n\nexport function getTargetByPath(origin, path) {\n  const arr = path.replace(/]/g, '').replace(/\\[/g, '.').split('.')\n  let current = origin\n  for (let i = 0, len = arr.length; i < len; i++) {\n    current = current[arr[i]]\n  }\n  return current\n}\n","import { extend } from './util';\nimport { h } from './h';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {import('./vnode').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./vnode').VNode>} [rest] Any additional arguments will be used as replacement\n *  children.\n */\nexport function cloneElement(vnode, props) {\n\treturn h(\n\t\tvnode.nodeName,\n\t\textend(extend({}, vnode.attributes), props),\n\t\targuments.length>2 ? [].slice.call(arguments, 2) : vnode.children\n\t);\n}\n","// render modes\n\n/** Do not re-render a component */\nexport const NO_RENDER = 0;\n/** Synchronously re-render a component and its children */\nexport const SYNC_RENDER = 1;\n/** Synchronously re-render a component, even if its lifecycle methods attempt to prevent it. */\nexport const FORCE_RENDER = 2;\n/** Queue asynchronous re-render of a component and it's children */\nexport const ASYNC_RENDER = 3;\n\n\nexport const ATTR_KEY = 'prevProps';\n\n/** DOM properties that should NOT have \"px\" added when numeric */\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n\n","import options from './options';\nimport { defer } from './util';\nimport { renderComponent } from './vdom/component';\n\n/**\n * Managed queue of dirty components to be re-rendered\n * @type {Array<import('./component').Component>}\n */\nlet items = [];\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./component').Component} component The component to rerender\n */\nexport function enqueueRender(component) {\n\tif (!component._dirty && (component._dirty = true) && items.push(component)==1) {\n\t\t(options.debounceRendering || defer)(rerender);\n\t}\n}\n\n/** Rerender all enqueued dirty components */\nexport function rerender() {\n\tlet p;\n\twhile ( (p = items.pop()) ) {\n\t\tif (p._dirty) renderComponent(p);\n\t}\n}\n","import { extend } from '../util';\n\n\n/**\n * Check if two nodes are equivalent.\n * @param {import('../dom').OmiElement} node DOM Node to compare\n * @param {import('../vnode').VNode} vnode Virtual DOM node to compare\n * @param {boolean} [hydrating=false] If true, ignores component constructors\n *  when comparing.\n * @private\n */\nexport function isSameNodeType(node, vnode, hydrating) {\n\tif (typeof vnode==='string' || typeof vnode==='number') {\n\t\treturn node.splitText!==undefined;\n\t}\n\tif (typeof vnode.nodeName==='string') {\n\t\treturn !node._componentConstructor && isNamedNode(node, vnode.nodeName);\n\t}\n\treturn hydrating || node._componentConstructor===vnode.nodeName;\n}\n\n\n/**\n * Check if an Element has a given nodeName, case-insensitively.\n * @param {import('../dom').OmiElement} node A DOM Element to inspect the name of.\n * @param {string} nodeName Unnormalized name to compare against.\n */\nexport function isNamedNode(node, nodeName) {\n\treturn node.normalizedNodeName===nodeName || node.nodeName.toLowerCase()===nodeName.toLowerCase();\n}\n\n\n/**\n * Reconstruct Component-style `props` from a VNode.\n * Ensures default/fallback values from `defaultProps`:\n * Own-properties of `defaultProps` not present in `vnode.attributes` are added.\n * @param {import('../vnode').VNode} vnode The VNode to get props for\n * @returns {object} The props to use for this VNode\n */\nexport function getNodeProps(vnode) {\n\tlet props = extend({}, vnode.attributes);\n\tprops.children = vnode.children;\n\n\tlet defaultProps = vnode.nodeName.defaultProps;\n\tif (defaultProps!==undefined) {\n\t\tfor (let i in defaultProps) {\n\t\t\tif (props[i]===undefined) {\n\t\t\t\tprops[i] = defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn props;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport { applyRef } from '../util';\nimport options from '../options';\n\n/**\n * A DOM event listener\n * @typedef {(e: Event) => void} EventListner\n */\n\n/**\n * A mapping of event types to event listeners\n * @typedef {Object.<string, EventListener>} EventListenerMap\n */\n\n/**\n * Properties Omi adds to elements it creates\n * @typedef OmiElementExtensions\n * @property {string} [normalizedNodeName] A normalized node name to use in diffing\n * @property {EventListenerMap} [_listeners] A map of event listeners added by components to this DOM node\n * @property {import('../component').Component} [_component] The component that rendered this DOM node\n * @property {function} [_componentConstructor] The constructor of the component that rendered this DOM node\n */\n\n/**\n * A DOM element that has been extended with Omi properties\n * @typedef {Element & ElementCSSInlineStyle & OmiElementExtensions} OmiElement\n */\n\n/**\n * Create an element with the given nodeName.\n * @param {string} nodeName The DOM node to create\n * @param {boolean} [isSvg=false] If `true`, creates an element within the SVG\n *  namespace.\n * @returns {OmiElement} The created DOM node\n */\nexport function createNode(nodeName, isSvg) {\n\t/** @type {OmiElement} */\n\tlet node = isSvg ? options.document.createElementNS('http://www.w3.org/2000/svg', nodeName) : options.document.createElement(nodeName);\n\tnode.normalizedNodeName = nodeName;\n\treturn node;\n}\n\n\n/**\n * Remove a child node from its parent if attached.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\n\n/**\n * Set a named attribute on the given Node, with special behavior for some names\n * and event handlers. If `value` is `null`, the attribute/handler will be\n * removed.\n * @param {OmiElement} node An element to mutate\n * @param {string} name The name/key to set, such as an event or attribute name\n * @param {*} old The last value that was set for this name/node pair\n * @param {*} value An attribute value, such as a function to be used as an\n *  event handler\n * @param {boolean} isSvg Are we currently diffing inside an svg?\n * @private\n */\nexport function setAccessor(node, name, old, value, isSvg, store) {\n\tif (name==='className') name = 'class';\n\n\n\tif (name==='key') {\n\t\t// ignore\n\t}\n\telse if (name==='ref') {\n\t\tapplyRef(old, null);\n\t\tapplyRef(value, node);\n\t}\n\telse if (name==='class' && !isSvg) {\n\t\tnode.className = value || '';\n\t}\n\telse if (name==='style') {\n\t\tnode.style = value\n\t\t// if (!value || typeof value==='string' || typeof old==='string') {\n\t\t// \tnode.style.cssText = value || '';\n\t\t// }\n\t\t// if (value && typeof value==='object') {\n\t\t// \tif (typeof old!=='string') {\n\t\t// \t\tfor (let i in old) if (!(i in value)) node.style[i] = '';\n\t\t// \t}\n\t\t// \tfor (let i in value) {\n\t\t// \t\tnode.style[i] = typeof value[i]==='number' && IS_NON_DIMENSIONAL.test(i)===false ? (value[i]+'px') : value[i];\n\t\t// \t}\n\t\t// }\n\t}\n\telse if (name==='dangerouslySetInnerHTML') {\n\t\tif (value) node.innerHTML = value.__html || '';\n\t}\n\telse if (name[0]=='o' && name[1]=='n') {\n\t\tlet useCapture = name !== (name=name.replace(/Capture$/, ''));\n\t\tname = name.toLowerCase().substring(2);\n\t\tif (value) {\n\t\t\tif (!old) node.addEventListener(name, eventProxy, useCapture);\n\t\t}\n\t\telse {\n\t\t\tnode.removeEventListener(name, eventProxy, useCapture);\n\t\t}\n\t\t(node._listeners || (node._listeners = {}))[name] = (value && store) ? value.bind(store) : value;\n\t}\n\telse if (name!=='list' && name!=='type' && !isSvg && name in node) {\n\t\t// Attempt to set a DOM property to the given value.\n\t\t// IE & FF throw for certain property-value combinations.\n\t\ttry {\n\t\t\tnode[name] = value==null ? '' : value;\n\t\t} catch (e) { }\n\t\tif ((value==null || value===false) && name!='spellcheck') node.removeAttribute(name);\n\t}\n\telse {\n\t\tlet ns = isSvg && (name !== (name = name.replace(/^xlink:?/, '')));\n\t\t// spellcheck is treated differently than all other boolean values and\n\t\t// should not be removed when the value is `false`. See:\n\t\t// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-spellcheck\n\t\tif (value==null || value===false) {\n\t\t\tif (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase());\n\t\t\telse node.removeAttribute(name);\n\t\t}\n\t\telse if (typeof value!=='function') {\n\t\t\tif (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), value);\n\t\t\telse node.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\treturn this._listeners[e.type](options.event && options.event(e) || e);\n}\n","import { ATTR_KEY } from '../constants';\nimport { isSameNodeType, isNamedNode } from './index';\nimport { buildComponentFromVNode } from './component';\nimport { createNode, setAccessor } from '../dom/index';\nimport { unmountComponent } from './component';\nimport options from '../options';\nimport { applyRef } from '../util';\nimport { removeNode } from '../dom/index';\nimport { addStyleToHead, getCtorName } from '../style'\n\n/**\n * Queue of components that have been mounted and are awaiting componentDidMount\n * @type {Array<import('../component').Component>}\n */\nexport const mounts = [];\n\n/** Diff recursion count, used to track the end of the diff cycle. */\nexport let diffLevel = 0;\n\n/** Global flag indicating if the diff is currently within an SVG */\nlet isSvgMode = false;\n\n/** Global flag indicating if the diff is performing hydration */\nlet hydrating = false;\n\n/** Invoke queued componentDidMount lifecycle methods */\nexport function flushMounts() {\n\tlet c;\n\twhile ((c = mounts.shift())) {\n\t\tif (c.constructor.css) {\n      addStyleToHead(c.constructor.css, getCtorName(c.constructor))\n\t\t}\n\t\tif(c.props.css){\n\t\t\taddStyleToHead(c.props.css, '_ds'+c.elementId)\n\t\t}\n\t\tif (options.afterMount) options.afterMount(c);\n\t\t//if (c.componentDidMount) c.componentDidMount();\n\t\tif (c.store.installed) c.store.installed()\n\t}\n}\n\n\n/**\n * Apply differences in a given vnode (and it's deep children) to a real DOM Node.\n * @param {import('../dom').OmiElement} dom A DOM node to mutate into the shape of a `vnode`\n * @param {import('../vnode').VNode} vnode A VNode (with descendants forming a tree) representing\n *  the desired DOM structure\n * @param {object} $ The current $\n * @param {boolean} mountAll Whether or not to immediately mount all components\n * @param {Element} parent ?\n * @param {boolean} componentRoot ?\n * @returns {import('../dom').OmiElement} The created/mutated element\n * @private\n */\nexport function diff(dom, vnode, $, mountAll, parent, componentRoot, store) {\n\t// diffLevel having been 0 here indicates initial entry into the diff (not a subdiff)\n\tif (!diffLevel++) {\n\t\t// when first starting the diff, check if we're diffing an SVG or within an SVG\n\t\tisSvgMode = parent!=null && parent.ownerSVGElement!==undefined;\n\n\t\t// hydration is indicated by the existing element to be diffed not having a prop cache\n\t\thydrating = dom!=null && !(ATTR_KEY in dom);\n\t}\n\n\tlet ret = idiff(dom, vnode, $, mountAll, componentRoot, store);\n\n\t// append the element if its a new parent\n\tif (parent && ret.parentNode!==parent) parent.appendChild(ret);\n\n\t// diffLevel being reduced to 0 means we're exiting the diff\n\tif (!--diffLevel) {\n\t\thydrating = false;\n\t\t// invoke queued componentDidMount lifecycle methods\n\t\tif (!componentRoot) flushMounts();\n\t}\n\n\treturn ret;\n}\n\n\n/**\n * Internals of `diff()`, separated to allow bypassing diffLevel / mount flushing.\n * @param {import('../dom').OmiElement} dom A DOM node to mutate into the shape of a `vnode`\n * @param {import('../vnode').VNode} vnode A VNode (with descendants forming a tree) representing the desired DOM structure\n * @param {object} $ The current $\n * @param {boolean} mountAll Whether or not to immediately mount all components\n * @param {boolean} [componentRoot] ?\n * @private\n */\nfunction idiff(dom, vnode, $, mountAll, componentRoot, store) {\n\tlet out = dom,\n\t\tprevSvgMode = isSvgMode;\n\n\t// empty values (null, undefined, booleans) render as empty Text nodes\n\tif (vnode==null || typeof vnode==='boolean') vnode = '';\n\n\n\t// Fast case: Strings & Numbers create/update Text nodes.\n\tif (typeof vnode==='string' || typeof vnode==='number') {\n\n\t\t// update if it's already a Text node:\n\t\tif (dom && dom.splitText!==undefined && dom.parentNode && (!dom._component || componentRoot)) {\n\t\t\t/* istanbul ignore if */ /* Browser quirk that can't be covered: https://github.com/developit/Omi/commit/fd4f21f5c45dfd75151bd27b4c217d8003aa5eb9 */\n\t\t\tif (dom.nodeValue!=vnode) {\n\t\t\t\tdom.nodeValue = vnode;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// it wasn't a Text node: replace it with one and recycle the old Element\n\t\t\tout = document.createTextNode(vnode);\n\t\t\tif (dom) {\n\t\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\t\t\t\trecollectNodeTree(dom, true);\n\t\t\t}\n\t\t}\n\n\t\tout[ATTR_KEY] = true;\n\n\t\treturn out;\n\t}\n\n\t// If the VNode represents a Component, perform a component diff:\n\tlet vnodeName = vnode.nodeName;\n\tif (typeof vnodeName==='function') {\n\t\treturn buildComponentFromVNode(dom, vnode, $, mountAll);\n\t}\n\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvgMode = vnodeName==='svg' ? true : vnodeName==='foreignObject' ? false : isSvgMode;\n\n\n\t// If there's no existing element or it's the wrong type, create a new one:\n\tvnodeName = String(vnodeName);\n\tif (!dom || !isNamedNode(dom, vnodeName)) {\n\t\tout = createNode(vnodeName, isSvgMode);\n\n\t\tif (dom) {\n\t\t\t// move children into the replacement node\n\t\t\twhile (dom.firstChild) out.appendChild(dom.firstChild);\n\n\t\t\t// if the previous Element was mounted into the DOM, replace it inline\n\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\n\t\t\t// recycle the old element (skips non-Element node types)\n\t\t\trecollectNodeTree(dom, true);\n\t\t}\n\t}\n\n\n\tlet fc = out.firstChild,\n\t\tprops = out[ATTR_KEY],\n\t\tvchildren = vnode.children;\n\n\tif (props==null) {\n\t\tprops = out[ATTR_KEY] = {};\n\t\tfor (let a=out.attributes, i=a.length; i--; ) props[a[i].name] = a[i].value;\n\t}\n\n\t// Optimization: fast-path for elements containing a single TextNode:\n\tif (!hydrating && vchildren && vchildren.length===1 && typeof vchildren[0]==='string' && fc!=null && fc.splitText!==undefined && fc.nextSibling==null) {\n\t\tif (fc.nodeValue!=vchildren[0]) {\n\t\t\tfc.nodeValue = vchildren[0];\n\t\t}\n\t}\n\t// otherwise, if there are existing or new children, diff them:\n\telse if (vchildren && vchildren.length || fc!=null) {\n\t\tinnerDiffNode(out, vchildren, $, mountAll, hydrating || props.dangerouslySetInnerHTML!=null, store);\n\t}\n\n\n\t// Apply attributes/props from VNode to the DOM Element:\n\tdiffAttributes(out, vnode.attributes, props, store);\n\n\n\t// restore previous SVG mode: (in case we're exiting an SVG namespace)\n\tisSvgMode = prevSvgMode;\n\n\treturn out;\n}\n\n\n/**\n * Apply child and attribute changes between a VNode and a DOM Node to the DOM.\n * @param {import('../dom').OmiElement} dom Element whose children should be compared & mutated\n * @param {Array<import('../vnode').VNode>} vchildren Array of VNodes to compare to `dom.childNodes`\n * @param {object} $ Implicitly descendant $ object (from most\n *  recent `getChildContext()`)\n * @param {boolean} mountAll Whether or not to immediately mount all components\n * @param {boolean} isHydrating if `true`, consumes externally created elements\n *  similar to hydration\n */\nfunction innerDiffNode(dom, vchildren, $, mountAll, isHydrating, store) {\n\tlet originalChildren = dom.childNodes,\n\t\tchildren = [],\n\t\tkeyed = {},\n\t\tkeyedLen = 0,\n\t\tmin = 0,\n\t\tlen = originalChildren.length,\n\t\tchildrenLen = 0,\n\t\tvlen = vchildren ? vchildren.length : 0,\n\t\tj, c, f, vchild, child;\n\n\t// Build up a map of keyed children and an Array of unkeyed children:\n\tif (len!==0) {\n\t\tfor (let i=0; i<len; i++) {\n\t\t\tlet child = originalChildren[i],\n\t\t\t\tprops = child[ATTR_KEY],\n\t\t\t\tkey = vlen && props ? child._component ? child._component.__key : props.key : null;\n\t\t\tif (key!=null) {\n\t\t\t\tkeyedLen++;\n\t\t\t\tkeyed[key] = child;\n\t\t\t}\n\t\t\telse if (props || (child.splitText!==undefined ? (isHydrating ? child.nodeValue.trim() : true) : isHydrating)) {\n\t\t\t\tchildren[childrenLen++] = child;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (vlen!==0) {\n\t\tfor (let i=0; i<vlen; i++) {\n\t\t\tvchild = vchildren[i];\n\t\t\tchild = null;\n\n\t\t\t// attempt to find a node based on key matching\n\t\t\tlet key = vchild.key;\n\t\t\tif (key!=null) {\n\t\t\t\tif (keyedLen && keyed[key]!==undefined) {\n\t\t\t\t\tchild = keyed[key];\n\t\t\t\t\tkeyed[key] = undefined;\n\t\t\t\t\tkeyedLen--;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// attempt to pluck a node of the same type from the existing children\n\t\t\telse if (min<childrenLen) {\n\t\t\t\tfor (j=min; j<childrenLen; j++) {\n\t\t\t\t\tif (children[j]!==undefined && isSameNodeType(c = children[j], vchild, isHydrating)) {\n\t\t\t\t\t\tchild = c;\n\t\t\t\t\t\tchildren[j] = undefined;\n\t\t\t\t\t\tif (j===childrenLen-1) childrenLen--;\n\t\t\t\t\t\tif (j===min) min++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// morph the matched/found/created DOM child to match vchild (deep)\n\t\t\tchild = idiff(child, vchild, $, mountAll, null, store);\n\n\t\t\tf = originalChildren[i];\n\t\t\tif (child && child!==dom && child!==f) {\n\t\t\t\tif (f==null) {\n\t\t\t\t\tdom.appendChild(child);\n\t\t\t\t}\n\t\t\t\telse if (child===f.nextSibling) {\n\t\t\t\t\tremoveNode(f);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdom.insertBefore(child, f);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\t// remove unused keyed children:\n\tif (keyedLen) {\n\t\tfor (let i in keyed) if (keyed[i]!==undefined) recollectNodeTree(keyed[i], false);\n\t}\n\n\t// remove orphaned unkeyed children:\n\twhile (min<=childrenLen) {\n\t\tif ((child = children[childrenLen--])!==undefined) recollectNodeTree(child, false);\n\t}\n}\n\n\n\n/**\n * Recursively recycle (or just unmount) a node and its descendants.\n * @param {import('../dom').OmiElement} node DOM node to start\n *  unmount/removal from\n * @param {boolean} [unmountOnly=false] If `true`, only triggers unmount\n *  lifecycle, skips removal\n */\nexport function recollectNodeTree(node, unmountOnly) {\n\tlet component = node._component;\n\tif (component) {\n\t\t// if node is owned by a Component, unmount that component (ends up recursing back here)\n\t\tunmountComponent(component);\n\t}\n\telse {\n\t\t// If the node's VNode had a ref function, invoke it with null here.\n\t\t// (this is part of the React spec, and smart for unsetting references)\n\t\tif (node[ATTR_KEY]!=null) applyRef(node[ATTR_KEY].ref, null);\n\n\t\tif (unmountOnly===false || node[ATTR_KEY]==null) {\n\t\t\tremoveNode(node);\n\t\t}\n\n\t\tremoveChildren(node);\n\t}\n}\n\n\n/**\n * Recollect/unmount all children.\n *\t- we use .lastChild here because it causes less reflow than .firstChild\n *\t- it's also cheaper than accessing the .childNodes Live NodeList\n */\nexport function removeChildren(node) {\n\tnode = node.lastChild;\n\twhile (node) {\n\t\tlet next = node.previousSibling;\n\t\trecollectNodeTree(node, true);\n\t\tnode = next;\n\t}\n}\n\n\n/**\n * Apply differences in attributes from a VNode to the given DOM Element.\n * @param {import('../dom').OmiElement} dom Element with attributes to diff `attrs` against\n * @param {object} attrs The desired end-state key-value attribute pairs\n * @param {object} old Current/previous attributes (from previous VNode or\n *  element's prop cache)\n */\nfunction diffAttributes(dom, attrs, old, store) {\n\tlet name;\n\n\t// remove attributes no longer present on the vnode by setting them to undefined\n\tfor (name in old) {\n\t\tif (!(attrs && attrs[name]!=null) && old[name]!=null) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = undefined, isSvgMode, store);\n\t\t}\n\t}\n\n\t// add new & update changed attributes\n\tfor (name in attrs) {\n\t\tif (name!=='children' && name!=='innerHTML' && (!(name in old) || attrs[name]!==(name==='value' || name==='checked' ? dom[name] : old[name]))) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode, store);\n\t\t}\n\t}\n}\n","import { Component } from '../component';\nimport {getPath, getUse} from '../util'\n/**\n * Retains a pool of Components for re-use.\n * @type {Component[]}\n * @private\n */\nexport const recyclerComponents = [];\n\n\n/**\n * Create a component. Normalizes differences between PFC's and classful\n * Components.\n * @param {function} Ctor The constructor of the component to create\n * @param {object} props The initial props of the component\n * @param {object} $ The initial $ of the component\n * @returns {import('../component').Component}\n */\nexport function createComponent(Ctor, props, $) {\n\tlet inst, i = recyclerComponents.length;\n\n\tinst = new Component(props, $);\n\tinst.constructor = Ctor;\n\tinst.render = doRender;\n\tif(Ctor.store){\n\t\tinst.store = Ctor.store(inst, $)\n\t\tinst.store.update = inst.update.bind(inst)\n\t}\n\n\tif ( inst.$ && inst.$.data) {\n\n\t\tif(inst.constructor.use){\n\t\t\tinst.constructor.updatePath = getPath(inst.constructor.use)\n\t\t\tinst.using = getUse(inst.$.data, inst.constructor.use)\n\t\t\tinst.$.instances.push(inst)\n\t\t} else if(inst.use){\n\t\t\tconst use = typeof inst.use === 'function' ? inst.use() : inst.use\n\t\t\tinst._updatePath = getPath(use)\n\t\t\tinst.using = getUse(inst.$.data, use)\n\t\t\tinst.$.instances.push(inst)\n\t\t}\n\t}\n\t\n\twhile (i--) {\n\t\tif (recyclerComponents[i].constructor===Ctor) {\n\t\t\tinst.nextBase = recyclerComponents[i].nextBase;\n\t\t\trecyclerComponents.splice(i, 1);\n\t\t\treturn inst;\n\t\t}\n\t}\n\n\treturn inst;\n}\n\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, $) {\n\treturn this.constructor(props, this.store, this, $);\n}\n","import { SYNC_RENDER, NO_RENDER, ASYNC_RENDER, ATTR_KEY } from '../constants';\nimport options from '../options';\nimport { extend, applyRef } from '../util';\nimport { enqueueRender } from '../render-queue';\nimport { getNodeProps } from './index';\nimport { diff, mounts, diffLevel, flushMounts, recollectNodeTree, removeChildren } from './diff';\nimport { createComponent, recyclerComponents } from './component-recycler';\nimport { removeNode } from '../dom/index';\n\n/**\n * Set a component's `props` and possibly re-render the component\n * @param {import('../component').Component} component The Component to set props on\n * @param {object} props The new props\n * @param {number} renderMode Render options - specifies how to re-render the component\n * @param {object} $ The new $\n * @param {boolean} mountAll Whether or not to immediately mount all components\n */\nexport function setComponentProps(component, props, renderMode, $, mountAll) {\n\tif (component._disable) return;\n\tcomponent._disable = true;\n\n\tcomponent.__ref = props.ref;\n\tcomponent.__key = props.key;\n\tdelete props.ref;\n\tdelete props.key;\n\n\tif (!component.base || mountAll) {\n\t\t//if (component.componentWillMount) component.componentWillMount();\n\t\tif (component.store.install) component.store.install()\n\t}\n\telse {\n\t\t// if (component.componentWillReceiveProps) {\n\t\t// \tcomponent.componentWillReceiveProps(props, $);\n\t\t// }\n\t\tif (component.store.receiveProps) {\n\t\t\tcomponent.__needUpdate_ = component.store.receiveProps(props, $)\n\t\t}\n\t}\n\t\n\tif ($ && $!==component.$) {\n\t\tcomponent.$ = $;\n\t}\n\n\tif (!component.prevProps) component.prevProps = component.props;\n\tcomponent.props = props;\n\n\tcomponent._disable = false;\n\n\tif (renderMode!==NO_RENDER) {\n\t\tif (renderMode===SYNC_RENDER || options.syncComponentUpdates!==false || !component.base) {\n\t\t\trenderComponent(component, SYNC_RENDER, mountAll);\n\t\t}\n\t\telse {\n\t\t\tenqueueRender(component);\n\t\t}\n\t}\n\n\tapplyRef(component.__ref, component);\n}\n\n\n\n/**\n * Render a Component, triggering necessary lifecycle events and taking\n * High-Order Components into account.\n * @param {import('../component').Component} component The component to render\n * @param {number} [renderMode] render mode, see constants.js for available options.\n * @param {boolean} [mountAll] Whether or not to immediately mount all components\n * @param {boolean} [isChild] ?\n * @private\n */\nexport function renderComponent(component, renderMode, mountAll, isChild) {\n\tif (component._disable) return;\n\n\tlet props = component.props,\n\t\t$ = component.$,\n\t\tpreviousProps = component.prevProps || props,\n\t\tisUpdate = component.base,\n\t\tnextBase = component.nextBase,\n\t\tinitialBase = isUpdate || nextBase,\n\t\tinitialChildComponent = component._component,\n\t\tskip = false,\n\t\trendered, inst, cbase;\n\n\t// if updating\n\tif (isUpdate) {\n\t\tcomponent.props = previousProps;\n\t\t\n\t\tif (component.__needUpdate_ !== false) {\n\t\t\tskip = false\n\t\t\tif (component.store.beforeUpdate) {\n\t\t\t\tcomponent.store.beforeUpdate(props, $)\n\t\t\t}\n\t\t} else {\n\t\t\tskip = true\n\t\t}\n\t\tdelete component.__needUpdate_\n    \n\t\tcomponent.props = props;\n\t}\n\n\tcomponent.prevProps = component.prevContext = component.nextBase = null;\n\tcomponent._dirty = false;\n\n\tif (!skip) {\n\t\toptions.runTimeComponent = component\n\t\tif(component.store.beforeRender){\n\t\t\tcomponent.store.beforeRender()\n\t\t}\n\t\trendered = component.render(props, $);\n\t\toptions.runTimeComponent = null\n\n\n\n\t\n\n\t\tlet childComponent = rendered && rendered.nodeName,\n\t\t\ttoUnmount, base;\n\n\t\tif (typeof childComponent==='function') {\n\t\t\t// set up high order component link\n\n\t\t\tlet childProps = getNodeProps(rendered);\n\t\t\tinst = initialChildComponent;\n\n\t\t\tif (inst && inst.constructor===childComponent && childProps.key==inst.__key) {\n\t\t\t\tsetComponentProps(inst, childProps, SYNC_RENDER, $, false);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttoUnmount = inst;\n\n\t\t\t\tcomponent._component = inst = createComponent(childComponent, childProps, $);\n\t\t\t\tinst.nextBase = inst.nextBase || nextBase;\n\t\t\t\tinst._parentComponent = component;\n\t\t\t\tsetComponentProps(inst, childProps, NO_RENDER, $, false);\n\t\t\t\trenderComponent(inst, SYNC_RENDER, mountAll, true);\n\t\t\t}\n\n\t\t\tbase = inst.base;\n\t\t}\n\t\telse {\n\t\t\tcbase = initialBase;\n\n\t\t\t// destroy high order component link\n\t\t\ttoUnmount = initialChildComponent;\n\t\t\tif (toUnmount) {\n\t\t\t\tcbase = component._component = null;\n\t\t\t}\n\n\t\t\tif (initialBase || renderMode===SYNC_RENDER) {\n\t\t\t\tif (cbase) cbase._component = null;\n\t\t\t\tbase = diff(cbase, rendered, $, mountAll || !isUpdate, initialBase && initialBase.parentNode, true, component.store);\n\t\t\t}\n\t\t}\n\n\t\tif (initialBase && base!==initialBase && inst!==initialChildComponent) {\n\t\t\tlet baseParent = initialBase.parentNode;\n\t\t\tif (baseParent && base!==baseParent) {\n\t\t\t\tbaseParent.replaceChild(base, initialBase);\n\n\t\t\t\tif (!toUnmount) {\n\t\t\t\t\tinitialBase._component = null;\n\t\t\t\t\trecollectNodeTree(initialBase, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (toUnmount) {\n\t\t\tunmountComponent(toUnmount);\n\t\t}\n\n\t\tcomponent.base = base;\n\t\tif (base && !isChild) {\n\t\t\tlet componentRef = component,\n\t\t\t\tt = component;\n\t\t\twhile ((t=t._parentComponent)) {\n\t\t\t\t(componentRef = t).base = base;\n\t\t\t}\n\t\t\tbase._component = componentRef;\n\t\t\tbase._componentConstructor = componentRef.constructor;\n\t\t}\n\t}\n\n\tif (!isUpdate || mountAll) {\n\t\tmounts.push(component);\n\t}\n\telse if (!skip) {\n\t\t// Ensure that pending componentDidMount() hooks of child components\n\t\t// are called before the componentDidUpdate() hook in the parent.\n\t\t// Note: disabled as it causes duplicate hooks, see https://github.com/developit/Omi/issues/750\n\t\t// flushMounts();\n\n\t\tif (component.store.updated) {\n\t\t\tcomponent.store.updated(previousProps);\n\t\t}\n\t\tif (options.afterUpdate) options.afterUpdate(component);\n\t}\n\n\twhile (component._renderCallbacks.length) component._renderCallbacks.pop().call(component);\n\n\tif (!diffLevel && !isChild) flushMounts();\n}\n\n\n\n/**\n * Apply the Component referenced by a VNode to the DOM.\n * @param {import('../dom').OmiElement} dom The DOM node to mutate\n * @param {import('../vnode').VNode} vnode A Component-referencing VNode\n * @param {object} $ The current $\n * @param {boolean} mountAll Whether or not to immediately mount all components\n * @returns {import('../dom').OmiElement} The created/mutated element\n * @private\n */\nexport function buildComponentFromVNode(dom, vnode, $, mountAll) {\n\tlet c = dom && dom._component,\n\t\toriginalComponent = c,\n\t\toldDom = dom,\n\t\tisDirectOwner = c && dom._componentConstructor===vnode.nodeName,\n\t\tisOwner = isDirectOwner,\n\t\tprops = getNodeProps(vnode);\n\twhile (c && !isOwner && (c=c._parentComponent)) {\n\t\tisOwner = c.constructor===vnode.nodeName;\n\t}\n\n\tif (c && isOwner && (!mountAll || c._component)) {\n\t\tsetComponentProps(c, props, ASYNC_RENDER, $, mountAll);\n\t\tdom = c.base;\n\t}\n\telse {\n\t\tif (originalComponent && !isDirectOwner) {\n\t\t\tunmountComponent(originalComponent);\n\t\t\tdom = oldDom = null;\n\t\t}\n\n\t\tc = createComponent(vnode.nodeName, props, $);\n\t\tif (dom && !c.nextBase) {\n\t\t\tc.nextBase = dom;\n\t\t\t// passing dom/oldDom as nextBase will recycle it if unused, so bypass recycling on L229:\n\t\t\toldDom = null;\n\t\t}\n\t\tsetComponentProps(c, props, SYNC_RENDER, $, mountAll);\n\t\tdom = c.base;\n\n\t\tif (oldDom && dom!==oldDom) {\n\t\t\toldDom._component = null;\n\t\t\trecollectNodeTree(oldDom, false);\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n\n\n/**\n * Remove a component from the DOM and recycle it.\n * @param {import('../component').Component} component The Component instance to unmount\n * @private\n */\nexport function unmountComponent(component) {\n\tif (options.beforeUnmount) options.beforeUnmount(component);\n\n\tlet base = component.base;\n\n\tcomponent._disable = true;\n\n\t//if (component.componentWillUnmount) component.componentWillUnmount();\n\tif (component.store.uninstall) component.store.uninstall();\n\tcomponent.base = null;\n\n\t// recursively tear down & recollect high-order component children:\n\tlet inner = component._component;\n\tif (inner) {\n\t\tunmountComponent(inner);\n\t}\n\telse if (base) {\n\t\tif (base[ATTR_KEY]!=null) applyRef(base[ATTR_KEY].ref, null);\n\n\t\tcomponent.nextBase = base;\n\n\t\tremoveNode(base);\n\t\trecyclerComponents.push(component);\n\n\t\tremoveChildren(base);\n\t}\n\n\tapplyRef(component.__ref, null);\n}\n","import { FORCE_RENDER } from './constants';\nimport { extend } from './util';\nimport { renderComponent } from './vdom/component';\n/**\n * Base Component class.\n * Provides `update()`, which trigger rendering.\n * @typedef {object} Component\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components' getChildContext\n * @public\n *\n * @example\n * class MyFoo extends Component {\n *   render(props) {\n *     return <div />;\n *   }\n * }\n */\n\n let id = 0\n\nexport function Component(props, $) {\n\tthis._dirty = true;\n\tthis.elementId = id++\n\t/**\n\t * @public\n\t * @type {object}\n\t */\n\tthis.store = {}\n\tthis.$ = $\n\t/**\n\t * @public\n\t * @type {object}\n\t */\n\tthis.props = props;\n\n\tthis._renderCallbacks = [];\n}\n\n\nextend(Component.prototype, {\n\n\t/**\n\t * Immediately perform a synchronous re-render of the component.\n\t * @param {() => void} callback A function to be called after component is\n\t * \tre-rendered.\n\t * @private\n\t */\n\tupdate(callback) {\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\trenderComponent(this, FORCE_RENDER);\n\t},\n\n\t/**\n\t * Accepts `props`, and returns a new Virtual DOM tree to build.\n\t * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n\t * @param {object} props Props (eg: JSX attributes) received from parent\n\t * \telement/component\n\t * @param {object} context Context object, as returned by the nearest\n\t *  ancestor's `getChildContext()`\n\t * @returns {import('./vnode').VNode | void}\n\t */\n\trender() {}\n\n});\n","/* \n * obaa 2.0.3\n * By dntzhang\n * Github: https://github.com/Tencent/omi/tree/master/packages/obaa\n * MIT Licensed.\n */\n\n\n// $_r: root\n// $_c: prop change callback\n// $_p: path\n\nexport function obaa(target, arr, callback) {\n\n  var eventPropArr = []\n  if (isArray(target)) {\n    if (target.length === 0) {\n      target.$_o = {\n        $_r: target,\n        $_p: '#'\n      }\n    }\n    mock(target, target)\n  }\n  for (var prop in target) {\n    if (target.hasOwnProperty(prop)) {\n      if (callback) {\n        if (isArray(arr) && isInArray(arr, prop)) {\n          eventPropArr.push(prop)\n          watch(target, prop, null, target)\n        } else if (isString(arr) && prop == arr) {\n          eventPropArr.push(prop)\n          watch(target, prop, null, target)\n        }\n      } else {\n        eventPropArr.push(prop)\n        watch(target, prop, null, target)\n      }\n    }\n  }\n  if (!target.$_c) {\n    target.$_c = []\n  }\n  var propChanged = callback ? callback : arr\n  target.$_c.push({\n    all: !callback,\n    propChanged: propChanged,\n    eventPropArr: eventPropArr\n  })\n}\n\nvar triggerStr = [\n  'concat',\n  'copyWithin',\n  'fill',\n  'pop',\n  'push',\n  'reverse',\n  'shift',\n  'sort',\n  'splice',\n  'unshift',\n  'size'\n].join(',')\n\nvar methods = [\n  'concat',\n  'copyWithin',\n  'entries',\n  'every',\n  'fill',\n  'filter',\n  'find',\n  'findIndex',\n  'forEach',\n  'includes',\n  'indexOf',\n  'join',\n  'keys',\n  'lastIndexOf',\n  'map',\n  'pop',\n  'push',\n  'reduce',\n  'reduceRight',\n  'reverse',\n  'shift',\n  'slice',\n  'some',\n  'sort',\n  'splice',\n  'toLocaleString',\n  'toString',\n  'unshift',\n  'values',\n  'size'\n]\n\nfunction mock(target, root) {\n  methods.forEach(function (item) {\n    target[item] = function () {\n      var old = Array.prototype.slice.call(this, 0)\n      var result = Array.prototype[item].apply(\n        this,\n        Array.prototype.slice.call(arguments)\n      )\n      if (new RegExp('\\\\b' + item + '\\\\b').test(triggerStr)) {\n        for (var cprop in this) {\n          if (\n            this.hasOwnProperty(cprop) &&\n            !isFunction(this[cprop])\n          ) {\n            watch(this, cprop, this.$_o.$_p, root)\n          }\n        }\n        //todo\n        onPropertyChanged(\n          'Array-' + item,\n          this,\n          old,\n          this,\n          this.$_o.$_p,\n          root\n        )\n      }\n      return result\n    }\n    target[\n      'pure' + item.substring(0, 1).toUpperCase() + item.substring(1)\n    ] = function () {\n      return Array.prototype[item].apply(\n        this,\n        Array.prototype.slice.call(arguments)\n      )\n    }\n  })\n}\n\nfunction watch(target, prop, path, root) {\n  if (prop === '$_o') return\n  if (isFunction(target[prop])) return\n  if (!target.$_o) target.$_o = {\n    $_r: root\n  }\n  if (path !== undefined && path !== null) {\n    target.$_o.$_p = path\n  } else {\n    target.$_o.$_p = '#'\n  }\n\n  var currentValue = (target.$_o[prop] = target[prop])\n  Object.defineProperty(target, prop, {\n    get: function () {\n      return this.$_o[prop]\n    },\n    set: function (value) {\n      var old = this.$_o[prop]\n      this.$_o[prop] = value\n      onPropertyChanged(\n        prop,\n        value,\n        old,\n        this,\n        target.$_o.$_p,\n        root\n      )\n    },\n    configurable: true,\n    enumerable: true\n  })\n  if (typeof currentValue == 'object') {\n    if (isArray(currentValue)) {\n      mock(currentValue, root)\n      if (currentValue.length === 0) {\n        if (!currentValue.$_o) currentValue.$_o = {}\n        if (path !== undefined && path !== null) {\n          currentValue.$_o.$_p = path + '-' + prop\n        } else {\n          currentValue.$_o.$_p = '#' + '-' + prop\n        }\n      }\n    }\n    for (var cprop in currentValue) {\n      if (currentValue.hasOwnProperty(cprop)) {\n        watch(\n          currentValue,\n          cprop,\n          target.$_o.$_p + '-' + prop,\n          root\n        )\n      }\n    }\n  }\n}\n\n\nfunction onPropertyChanged(prop, value, oldValue, target, path, root) {\n  if (value !== oldValue && root.$_c) {\n    var rootName = getRootName(prop, path)\n    for (\n      var i = 0, len = root.$_c.length;\n      i < len;\n      i++\n    ) {\n      var handler = root.$_c[i]\n      if (\n        handler.all ||\n        isInArray(handler.eventPropArr, rootName) ||\n        rootName.indexOf('Array-') === 0\n      ) {\n        handler.propChanged.call(target, prop, value, oldValue, path)\n      }\n    }\n  }\n\n  if (prop.indexOf('Array-') !== 0 && typeof value === 'object') {\n    watch(target, prop, target.$_o.$_p, root)\n  }\n}\n\nfunction isFunction(obj) {\n  return Object.prototype.toString.call(obj) == '[object Function]'\n}\n\n\n\nfunction isArray(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]'\n}\n\nfunction isString(obj) {\n  return typeof obj === 'string'\n}\n\nfunction isInArray(arr, item) {\n  for (var i = arr.length; --i > -1;) {\n    if (item === arr[i]) return true\n  }\n  return false\n}\n\n\nfunction getRootName(prop, path) {\n  if (path === '#') {\n    return prop\n  }\n  return path.split('-')[1]\n}\n\nobaa.add = function (obj, prop) {\n  watch(obj, prop, obj.$_o.$_p, obj.$_o.$_r)\n}\n\nobaa.set = function (obj, prop, value) {\n  watch(obj, prop, obj.$_o.$_p, obj.$_o.$_r)\n  obj[prop] = value\n}\n\nArray.prototype.size = function (length) {\n  this.length = length\n}\n\n","import { diff } from './vdom/diff';\nimport { obaa } from './obaa'\nimport { getUse } from './util'\n\n/**\n * Render JSX into a `parent` Element.\n * @param {import('./vnode').VNode} vnode A (JSX) VNode to render\n * @param {import('./dom').OmiElement} parent DOM element to render into\n * @param {import('./dom').OmiElement} [merge] Attempt to re-use an existing DOM tree rooted at\n *  `merge`\n * @public\n *\n * @example\n * // render a div into <body>:\n * render(<div id=\"hello\">hello!</div>, document.body);\n *\n * @example\n * // render a \"Thing\" component into #foo:\n * const Thing = ({ name }) => <span>{ name }</span>;\n * render(<Thing name=\"one\" />, document.querySelector('#foo'));\n */\nexport function render(vnode, parent, globalStore) {\n\tobsStore(globalStore)\n\treturn diff(null, vnode, globalStore, false, typeof parent === 'string' ? document.querySelector(parent) : parent, false);\n}\n\n\nfunction obsStore(store){\n  if (store && store.data) {\n    store.instances = []\n    extendStoreUpate(store)\n\n    obaa(store.data, (prop, val, old, path) => {\n\t\t\tconst patchs = {}\n      const key = fixPath(path + '-' + prop)\n      patchs[key] = true\n\t\t\tstore.update(patchs)\n    })\n  }\n}\n\nexport function merge(vnode, merge, store) {\n  obsStore(store)\n\n  merge =\n    typeof merge === 'string'\n      ? document.querySelector(merge)\n      : merge\n\n  return diff(merge, vnode, store)\n}\n\nfunction extendStoreUpate(store) {\n  store.update = function(patch) {\n    const updateAll = matchGlobalData(this.globalData, patch)\n    if (Object.keys(patch).length > 0) {\n\n      this.instances.forEach(instance => {\n        if (\n          updateAll ||\n          this.updateAll ||\n          (instance.constructor.updatePath &&\n\t\t\t\t\t\tneedUpdate(patch, instance.constructor.updatePath)) ||\n\t\t\t\t\t\t(instance._updatePath &&\n\t\t\t\t\t\t\tneedUpdate(patch, instance._updatePath))\n        ) {\n\t\t\t\t\t//update this.using\n\t\t\t\t\tif(instance.constructor.use){\n\t\t\t\t\t\tinstance.using = getUse(store.data, instance.constructor.use)\n\t\t\t\t\t} else if(instance.use){\n\t\t\t\t\t\tinstance.using = getUse(store.data, typeof instance.use === 'function' ? instance.use() : instance.use)\n\t\t\t\t\t}\n\n          instance.update()\n        }\n      })\n      this.onChange && this.onChange(patch)\n    }\n  }\n}\n\nexport function matchGlobalData(globalData, diffResult) {\n  if (!globalData) return false\n  for (let keyA in diffResult) {\n    if (globalData.indexOf(keyA) > -1) {\n      return true\n    }\n    for (let i = 0, len = globalData.length; i < len; i++) {\n      if (includePath(keyA, globalData[i])) {\n        return true\n      }\n    }\n  }\n  return false\n}\n\nexport function needUpdate(diffResult, updatePath) {\n  for (let keyA in diffResult) {\n    if (updatePath[keyA]) {\n      return true\n    }\n    for (let keyB in updatePath) {\n      if (includePath(keyA, keyB)) {\n        return true\n      }\n    }\n  }\n  return false\n}\n\nfunction includePath(pathA, pathB) {\n  if (pathA.indexOf(pathB) === 0) {\n    const next = pathA.substr(pathB.length, 1)\n    if (next === '[' || next === '.') {\n      return true\n    }\n  }\n  return false\n}\n\nexport function fixPath(path) {\n  let mpPath = ''\n  const arr = path.replace('#-', '').split('-')\n  arr.forEach((item, index) => {\n    if (index) {\n      if (isNaN(Number(item))) {\n        mpPath += '.' + item\n      } else {\n        mpPath += '[' + item + ']'\n      }\n    } else {\n      mpPath += item\n    }\n  })\n  return mpPath\n}\n","import { h } from './h'\nimport { render } from './render'\nimport { addStyleToHead, getCtorName } from './style'\n\n\t; (function () {\n\t\tif (\n\t\t\t// No Reflect, no classes, no need for shim because native custom elements\n\t\t\t// require ES2015 classes or Reflect.\n\t\t\twindow.Reflect === undefined ||\n\t\t\twindow.customElements === undefined ||\n\t\t\t// The webcomponentsjs custom elements polyfill doesn't require\n\t\t\t// ES2015-compatible construction (`super()` or `Reflect.construct`).\n\t\t\twindow.customElements.hasOwnProperty('polyfillWrapFlushCallback')\n\t\t) {\n\t\t\treturn\n\t\t}\n\t\tvar BuiltInHTMLElement = HTMLElement\n\t\twindow.HTMLElement = function HTMLElement() {\n\t\t\treturn Reflect.construct(BuiltInHTMLElement, [], this.constructor)\n\t\t}\n\t\tHTMLElement.prototype = BuiltInHTMLElement.prototype\n\t\tHTMLElement.prototype.constructor = HTMLElement\n\t\tObject.setPrototypeOf(HTMLElement, BuiltInHTMLElement)\n\t})()\n\nexport function define(name, Component) {\n\tcustomElements.define(name, class extends HTMLElement {\n\n\t\tconnectedCallback() {\n\t\t\tvar shadowRoot = this.attachShadow({\n\t\t\t\tmode: 'open'\n\t\t\t})\n\t\t\tthis.props = {}\n\t\t\tthis.attrsToProps()\n\t\t\n\t\t\t//Component.css = null\n\t\t\tif(Component.css){\n\t\t\t\taddStyleToHead(Component.css, getCtorName(Component), shadowRoot)\n\t\t\t}\n\t\t\t\n\t\t\tthis._ele = render(h(Component, this.props), shadowRoot)\n\n\t\t\tif(this.props.css){\n\t\t\t\taddStyleToHead(this.props.css, '_ds'+this._ele._component.elementId, shadowRoot)\n\t\t\t}\n\t\t}\n\n\t\tdisconnectedCallback() {\n\n\t\t}\n\n\t\taddEventListener(name, callback) {\n\t\t\tthis._ele._component.props['on' + name.charAt(0).toUpperCase() + name.slice(1)] = callback\n\t\t}\n\n\t\tremoveEventListener(name, callback) {\n\t\t\tvar props = this._ele._component.props\n\t\t\tvar eventName = 'on' + name.charAt(0).toUpperCase() + name.slice(1)\n\t\t\tfor (var key in props) {\n\t\t\t\tif (key === eventName && callback === props[key]) {\n\t\t\t\t\tdelete props[key]\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tremoveAttribute(key) {\n\t\t\tsuper.removeAttribute(key)\n\t\t\tdelete this._ele._component.props[key]\n\t\t\tif(Component.defaultProps.hasOwnProperty(key)){\n\t\t\t\tthis._ele._component.props[key] = Component.defaultProps[key]\n\t\t\t}\n\t\t\tthis._ele._component.update()\n\t\t}\n\t\n\t\tsetAttribute(key, val) {\n\t\t\tif (val && typeof val === 'object') {\n\t\t\t\tval = JSON.stringify(val)\n\t\t\t\tsuper.setAttribute(key, val)\n\t\t\t} else {\n\t\t\t\tval = val.toString()\n\t\t\t\tsuper.setAttribute(key, val)\n\t\t\t}\n\t\t\tthis.attrToProp(key, val, this._ele._component.props)\n\t\t\tthis._ele._component.update()\n\t\t}\n\n\t\tattrToProp(key, val, props){\n\t\t\tvar type = Component.propTypes[key]\n\t\t\tswitch (type) {\n\t\t\t\tcase String:\n\t\t\t\t\tprops[key] = val\n\t\t\t\t\tbreak\n\t\t\t\tcase Number:\n\t\t\t\t\tprops[key] = Number(val)\n\t\t\t\t\tbreak\n\t\t\t\tcase Boolean:\n\t\t\t\t\tif (val === 'false' || val === '0') {\n\t\t\t\t\t\tprops[key] = false\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprops[key] = true\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\tcase Array:\n\t\t\t\tcase Object:\n\t\t\t\t\tprops[key] = JSON.parse(val\n\t\t\t\t\t\t.replace(/(['\"])?([a-zA-Z0-9_-]+)(['\"])?:([^\\/])/g, '\"$2\":$4')\n\t\t\t\t\t\t.replace(/'([\\s\\S]*?)'/g, '\"$1\"')\n\t\t\t\t\t\t.replace(/,(\\s*})/g, '$1')\n\t\t\t\t\t)\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\tattrsToProps() {\n\t\t\tthis.props['css'] = this.getAttribute('css')\n\t\t\tvar attrs = Component.propTypes\n\t\t\tif (!attrs) return\n\t\t\tObject.keys(attrs).forEach(key => {\n\t\t\t\tvar type = attrs[key]\n\t\t\t\tvar val = this.getAttribute(hyphenate(key))\n\t\t\t\tif (val !== null) {\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase String:\n\t\t\t\t\t\t\tthis.props[key] = val\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase Number:\n\t\t\t\t\t\t\tthis.props[key] = Number(val)\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase Boolean:\n\t\t\t\t\t\t\tif (val === 'false' || val === '0') {\n\t\t\t\t\t\t\t\tthis.props[key] = false\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.props[key] = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase Array:\n\t\t\t\t\t\tcase Object:\n\t\t\t\t\t\t\tthis.props[key] = JSON.parse(val\n\t\t\t\t\t\t\t\t.replace(/(['\"])?([a-zA-Z0-9_-]+)(['\"])?:([^\\/])/g, '\"$2\":$4')\n\t\t\t\t\t\t\t\t.replace(/'([\\s\\S]*?)'/g, '\"$1\"')\n\t\t\t\t\t\t\t\t.replace(/,(\\s*})/g, '$1')\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (Component.defaultProps && Component.defaultProps.hasOwnProperty(key)) {\n\t\t\t\t\t\tthis.props[key] = Component.defaultProps[key]\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.props[key] = null\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t})\n}\n\nfunction hyphenate(str) {\n\treturn str.replace(/\\B([A-Z])/g, '-$1').toLowerCase()\n}\n\n","import { h, h as createElement } from './h';\nimport { cloneElement } from './clone-element';\nimport { Component } from './component';\nimport { render } from './render';\nimport { rerender } from './render-queue';\nimport { define } from './define';\nimport { obaa } from './obaa';\nimport options from './options';\n\nfunction createRef() {\n\treturn {};\n}\n\nexport default {\n\th,\n\tcreateElement,\n\tcloneElement,\n\tcreateRef,\n\tComponent,\n\trender,\n\trerender,\n\toptions,\n\tdefine,\n\tobaa\n};\n\nexport {\n\th,\n\tcreateElement,\n\tcloneElement,\n\tcreateRef,\n\tComponent,\n\trender,\n\trerender,\n\toptions,\n\tdefine,\n\tobaa\n};\n\nif(typeof window !== 'undefined'){\n\twindow.Omis = {\n\t\th,\n\t\tcreateElement,\n\t\tcloneElement,\n\t\tcreateRef,\n\t\tComponent,\n\t\trender,\n\t\trerender,\n\t\toptions,\n\t\tdefine,\n\t\tobaa\n\t};\n}\n","import layout from './layout/layout-node'\nimport {render,h} from './omis/omis'\n\nexport function draw(node){\n  const dom = render(h(node))\n  console.log(dom)\n  console.log(node())\n  console.log(layout(node()))\n}\n\n\nfunction convert(dom){\n  var obj = {}\n  obj.nodeName = dom.nodeName\n  obj.frame = {\n    \"x\": 0,\n    \"y\": 0,\n    \"width\": 0,\n    \"height\": 0\n  }\n  \n  //obj.children = \n}\n","import { draw } from './render'\nimport { h } from './omis/h'\n//import { h } from './h'\n\nconst root = getGlobal()\n\n\nroot.Omi = { h, version: '0.0.0' }\n\nfunction getGlobal() {\n  if (\n    typeof global !== 'object' ||\n    !global ||\n    global.Math !== Math ||\n    global.Array !== Array\n  ) {\n    if (typeof self !== 'undefined') {\n      return self\n    } else if (typeof window !== 'undefined') {\n      return window\n    } else if (typeof global !== 'undefined') {\n      return global\n    }\n    return (function () {\n      return this\n    })()\n  }\n  return global\n}\n\nexport {\n  draw,\n  h\n}\n","import { draw, h } from '../../src/index'\n\nconst size = getSize();\n\n// store storedata data props\nconst store = {\n\n}\n\n//UI is UI data\nconst App = (props, store) => {\n  return <surface top={0} left={0} width={size.width} height={size.height} enableCSSLayout={true}>\n    <group style={getPageStyle()}>\n      <text style={getTitleStyle()}>\n        Professor PuddinPop\n   </text>\n      <group style={getImageGroupStyle()}>\n        <image src='https://placekitten.com/720/840' style={getImageStyle()} fadeIn={true} />\n      </group>\n      <text style={getExcerptStyle()}>\n        With these words the Witch fell down in a brown, melted, shapeless mass and began to spread over the clean boards of the kitchen floor.  Seeing that she had really melted away to nothing, Dorothy drew another bucket of water and threw it over the mess.  She then swept it all out the door.  After picking out the silver shoe, which was all that was left of the old woman, she cleaned and dried it with a cloth, and put it on her foot again.  Then, being at last free to do as she chose, she ran out to the courtyard to tell the Lion that the Wicked Witch of the West had come to an end, and that they were no longer prisoners in a strange land.\n   </text>\n    </group>\n  </surface>\n}\n\n// store\nconsole.log(draw(App, store))\n\nfunction getSize() {\n  return {\n    left: 0,\n    top: 0,\n    width: 420,\n    height: 740\n  }\n}\n\nfunction getPageStyle() {\n\n  return {\n    position: 'relative',\n    padding: 14,\n    width: size.width,\n    height: size.height,\n    backgroundColor: '#f7f7f7',\n    flexDirection: 'column'\n  };\n}\n\nfunction getImageGroupStyle() {\n  return {\n    position: 'relative',\n    flex: 1,\n    backgroundColor: '#eee'\n  };\n}\n\nfunction getImageStyle() {\n  return {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0\n  };\n}\n\nfunction getTitleStyle() {\n  return {\n    fontFace: FontFace('Georgia'),\n    fontSize: 22,\n    lineHeight: 28,\n    height: 28,\n    marginBottom: 10,\n    color: '#333',\n    textAlign: 'center'\n  };\n}\n\nfunction getExcerptStyle() {\n  return {\n    fontFace: FontFace('Georgia'),\n    fontSize: 17,\n    lineHeight: 25,\n    marginTop: 15,\n    flex: 1,\n    color: '#333'\n  };\n}\n\nfunction FontFace() {\n\n}\n"],"names":["computeLayout","capitalizeFirst","str","charAt","toUpperCase","slice","getSpacing","node","type","suffix","location","key","style","getPositiveSpacing","isUndefined","value","undefined","getMargin","getPadding","getBorder","getPaddingAndBorder","getMarginAxis","axis","leading","trailing","getPaddingAndBorderAxis","getJustifyContent","justifyContent","getAlignItem","child","alignSelf","alignItems","getFlexDirection","flexDirection","getPositionType","position","getFlex","flex","isFlex","CSS_POSITION_RELATIVE","isFlexWrap","flexWrap","getDimWithMargin","layout","dim","isDimDefined","isPosDefined","pos","isMeasureDefined","getPosition","setDimensionFromStyle","fmaxf","getRelativePosition","row","column","a","b","CSS_UNDEFINED","CSS_FLEX_DIRECTION_ROW","CSS_FLEX_DIRECTION_COLUMN","CSS_JUSTIFY_FLEX_START","CSS_JUSTIFY_CENTER","CSS_JUSTIFY_FLEX_END","CSS_JUSTIFY_SPACE_BETWEEN","CSS_JUSTIFY_SPACE_AROUND","CSS_ALIGN_FLEX_START","CSS_ALIGN_CENTER","CSS_ALIGN_STRETCH","CSS_POSITION_ABSOLUTE","layoutNode","parentMaxWidth","mainAxis","crossAxis","width","isRowUndefined","isColumnUndefined","measure_dim","measure","height","i","children","length","ii","definedMainDim","startLine","endLine","alreadyComputedNextLayout","linesCrossDim","linesMainDim","mainContentDim","flexibleChildrenCount","totalFlexible","nonFlexibleChildrenCount","nextContentDim","maxWidth","leadingMainDim","betweenMainDim","remainingMainDim","flexibleMainDim","crossDim","mainDim","containerMainAxis","containerCrossAxis","leadingCrossDim","alignItem","remainingCrossDim","root","rootNode","createNode","walkNode","layer","top","left","attributes","map","parentLeft","parentTop","frame","x","y","forEach","VNode","nodeId","uniqueId","docMap","addDoc","id","doc","getDoc","removeDoc","insertIndex","target","list","newIndex","before","after","splice","nextSibling","previousSibling","moveIndex","index","indexOf","newIndexAfter","beforeNew","afterNew","removeIndex","changeSibling","linkParent","parent","parentNode","docId","ownerDocument","nodeMap","depth","childNodes","displayMap","div","span","registerNode","Element","nodeType","ref","display","classStyle","event","nodeName","firstChild","appendChild","removeChild","insertBefore","insertAfter","removeElement","setAttribute","silent","removeAttribute","setStyle","result","setStyles","styles","Object","assign","setClassStyle","toStyle","addEventListener","handler","removeEventListener","removeEvent","fireEvent","e","call","getComputedStyle","toJSON","keys","replaceChild","newChild","oldChild","destroy","Document","_isMockDocument","createElement","tagName","props","el","listener","document","options","runTimeComponent","styleCache","staticStyleMapping","styleId","getCtorName","ctor","len","item","attrName","push","scoper","css","prefix","toLowerCase","replace","re","RegExp","g0","g1","g2","g3","match","appendClass","addStyle","cssText","ele","getElementById","head","getElementsByTagName","someThingStyles","window","ActiveXObject","styleSheet","textContent","addStyleToHead","attr","stack","EMPTY_CHILDREN","h","lastSimple","simple","arguments","p","pop","String","vnode","extend","obj","applyRef","current","defer","Promise","resolve","then","bind","setTimeout","getPath","prototype","toString","tempPath","path","getUpdatePath","data","dataToPath","OBJECTTYPE","_objToPath","ARRAYTYPE","_arrayToPath","getUse","paths","isPath","getTargetByPath","tempVal","args","apply","origin","arr","split","cloneElement","NO_RENDER","SYNC_RENDER","FORCE_RENDER","ASYNC_RENDER","ATTR_KEY","items","enqueueRender","component","_dirty","debounceRendering","rerender","renderComponent","isSameNodeType","hydrating","splitText","_componentConstructor","isNamedNode","normalizedNodeName","getNodeProps","defaultProps","isSvg","createElementNS","removeNode","setAccessor","name","old","store","className","innerHTML","__html","useCapture","substring","eventProxy","_listeners","ns","removeAttributeNS","setAttributeNS","mounts","diffLevel","isSvgMode","flushMounts","c","shift","constructor","elementId","afterMount","installed","diff","dom","$","mountAll","componentRoot","ownerSVGElement","ret","idiff","out","prevSvgMode","_component","nodeValue","createTextNode","recollectNodeTree","vnodeName","buildComponentFromVNode","fc","vchildren","innerDiffNode","dangerouslySetInnerHTML","diffAttributes","isHydrating","originalChildren","keyed","keyedLen","min","childrenLen","vlen","j","f","vchild","__key","trim","unmountOnly","unmountComponent","removeChildren","lastChild","next","attrs","recyclerComponents","createComponent","Ctor","inst","Component","render","doRender","update","use","updatePath","using","instances","_updatePath","nextBase","setComponentProps","renderMode","_disable","__ref","base","install","receiveProps","__needUpdate_","prevProps","syncComponentUpdates","isChild","previousProps","isUpdate","initialBase","initialChildComponent","skip","rendered","cbase","beforeUpdate","prevContext","beforeRender","childComponent","toUnmount","childProps","_parentComponent","baseParent","componentRef","t","updated","afterUpdate","_renderCallbacks","originalComponent","oldDom","isDirectOwner","isOwner","beforeUnmount","uninstall","inner","callback","obaa","eventPropArr","isArray","$_o","$_r","$_p","mock","prop","hasOwnProperty","isInArray","watch","isString","$_c","propChanged","all","triggerStr","join","methods","Array","test","cprop","isFunction","onPropertyChanged","currentValue","defineProperty","get","set","configurable","enumerable","oldValue","rootName","getRootName","add","size","globalStore","obsStore","querySelector","extendStoreUpate","val","patchs","fixPath","patch","updateAll","matchGlobalData","globalData","instance","needUpdate","onChange","diffResult","keyA","includePath","keyB","pathA","pathB","substr","mpPath","isNaN","Number","Reflect","customElements","BuiltInHTMLElement","HTMLElement","construct","setPrototypeOf","define","connectedCallback","shadowRoot","attachShadow","mode","attrsToProps","_ele","disconnectedCallback","eventName","JSON","stringify","attrToProp","propTypes","Boolean","parse","getAttribute","hyphenate","createRef","Omis","draw","console","log","getGlobal","Omi","version","global","Math","self","getSize","App","getPageStyle","getTitleStyle","getImageGroupStyle","getImageStyle","getExcerptStyle","padding","backgroundColor","right","bottom","fontFace","FontFace","fontSize","lineHeight","marginBottom","color","textAlign","marginTop"],"mappings":"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"}