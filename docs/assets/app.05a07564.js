import{K as ue,j as Y,x as ce,O as pe,s as q,a1 as fe,a2 as ge,a3 as ve,a4 as he,a5 as ze,a6 as ye,a7 as be,a8 as Ee,a9 as we,aa as Ce,V as Le,d as He,u as Ae,y as Oe,ab as Se,ac as Te,ad as xe,ae as Pe}from"./chunks/framework.a9f6acec.js";import{t as Ie}from"./chunks/theme.fc1fab02.js";/*! medium-zoom 1.0.8 | MIT License | https://github.com/francoischalifour/medium-zoom */var b=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])}return n},x=function(t){return t.tagName==="IMG"},Ne=function(t){return NodeList.prototype.isPrototypeOf(t)},P=function(t){return t&&t.nodeType===1},$=function(t){var a=t.currentSrc||t.src;return a.substr(-4).toLowerCase()===".svg"},B=function(t){try{return Array.isArray(t)?t.filter(x):Ne(t)?[].slice.call(t).filter(x):P(t)?[t].filter(x):typeof t=="string"?[].slice.call(document.querySelectorAll(t)).filter(x):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},Re=function(t){var a=document.createElement("div");return a.classList.add("medium-zoom-overlay"),a.style.background=t,a},je=function(t){var a=t.getBoundingClientRect(),i=a.top,s=a.left,I=a.width,N=a.height,h=t.cloneNode(),R=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,A=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return h.removeAttribute("id"),h.style.position="absolute",h.style.top=i+R+"px",h.style.left=s+A+"px",h.style.width=I+"px",h.style.height=N+"px",h.style.transform="",h},C=function(t,a){var i=b({bubbles:!1,cancelable:!1,detail:void 0},a);if(typeof window.CustomEvent=="function")return new CustomEvent(t,i);var s=document.createEvent("CustomEvent");return s.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),s},_e=function n(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=window.Promise||function(o){function r(){}o(r,r)},s=function(o){var r=o.target;if(r===S){z();return}g.indexOf(r)!==-1&&D({target:r})},I=function(){if(!(E||!e.original)){var o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(F-o)>m.scrollOffset&&setTimeout(z,150)}},N=function(o){var r=o.key||o.keyCode;(r==="Escape"||r==="Esc"||r===27)&&z()},h=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=o;if(o.background&&(S.style.background=o.background),o.container&&o.container instanceof Object&&(r.container=b({},m.container,o.container)),o.template){var l=P(o.template)?o.template:document.querySelector(o.template);r.template=l}return m=b({},m,r),g.forEach(function(u){u.dispatchEvent(C("medium-zoom:update",{detail:{zoom:c}}))}),c},R=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return n(b({},m,o))},A=function(){for(var o=arguments.length,r=Array(o),l=0;l<o;l++)r[l]=arguments[l];var u=r.reduce(function(d,f){return[].concat(d,B(f))},[]);return u.filter(function(d){return g.indexOf(d)===-1}).forEach(function(d){g.push(d),d.classList.add("medium-zoom-image")}),O.forEach(function(d){var f=d.type,v=d.listener,w=d.options;u.forEach(function(y){y.addEventListener(f,v,w)})}),c},W=function(){for(var o=arguments.length,r=Array(o),l=0;l<o;l++)r[l]=arguments[l];e.zoomed&&z();var u=r.length>0?r.reduce(function(d,f){return[].concat(d,B(f))},[]):g;return u.forEach(function(d){d.classList.remove("medium-zoom-image"),d.dispatchEvent(C("medium-zoom:detach",{detail:{zoom:c}}))}),g=g.filter(function(d){return u.indexOf(d)===-1}),c},K=function(o,r){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return g.forEach(function(u){u.addEventListener("medium-zoom:"+o,r,l)}),O.push({type:"medium-zoom:"+o,listener:r,options:l}),c},X=function(o,r){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return g.forEach(function(u){u.removeEventListener("medium-zoom:"+o,r,l)}),O=O.filter(function(u){return!(u.type==="medium-zoom:"+o&&u.listener.toString()===r.toString())}),c},U=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=o.target,l=function(){var d={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},f=void 0,v=void 0;if(m.container)if(m.container instanceof Object)d=b({},d,m.container),f=d.width-d.left-d.right-m.margin*2,v=d.height-d.top-d.bottom-m.margin*2;else{var w=P(m.container)?m.container:document.querySelector(m.container),y=w.getBoundingClientRect(),j=y.width,ee=y.height,te=y.left,oe=y.top;d=b({},d,{width:j,height:ee,left:te,top:oe})}f=f||d.width-m.margin*2,v=v||d.height-m.margin*2;var H=e.zoomedHd||e.original,ne=$(H)?f:H.naturalWidth||f,ae=$(H)?v:H.naturalHeight||v,T=H.getBoundingClientRect(),re=T.top,ie=T.left,_=T.width,k=T.height,de=Math.min(Math.max(_,ne),f)/_,me=Math.min(Math.max(k,ae),v)/k,M=Math.min(de,me),se=(-ie+(f-_)/2+m.margin+d.left)/M,le=(-re+(v-k)/2+m.margin+d.top)/M,Z="scale("+M+") translate3d("+se+"px, "+le+"px, 0)";e.zoomed.style.transform=Z,e.zoomedHd&&(e.zoomedHd.style.transform=Z)};return new i(function(u){if(r&&g.indexOf(r)===-1){u(c);return}var d=function j(){E=!1,e.zoomed.removeEventListener("transitionend",j),e.original.dispatchEvent(C("medium-zoom:opened",{detail:{zoom:c}})),u(c)};if(e.zoomed){u(c);return}if(r)e.original=r;else if(g.length>0){var f=g;e.original=f[0]}else{u(c);return}if(e.original.dispatchEvent(C("medium-zoom:open",{detail:{zoom:c}})),F=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,E=!0,e.zoomed=je(e.original),document.body.appendChild(S),m.template){var v=P(m.template)?m.template:document.querySelector(m.template);e.template=document.createElement("div"),e.template.appendChild(v.content.cloneNode(!0)),document.body.appendChild(e.template)}if(e.original.parentElement&&e.original.parentElement.tagName==="PICTURE"&&e.original.currentSrc&&(e.zoomed.src=e.original.currentSrc),document.body.appendChild(e.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),e.original.classList.add("medium-zoom-image--hidden"),e.zoomed.classList.add("medium-zoom-image--opened"),e.zoomed.addEventListener("click",z),e.zoomed.addEventListener("transitionend",d),e.original.getAttribute("data-zoom-src")){e.zoomedHd=e.zoomed.cloneNode(),e.zoomedHd.removeAttribute("srcset"),e.zoomedHd.removeAttribute("sizes"),e.zoomedHd.removeAttribute("loading"),e.zoomedHd.src=e.zoomed.getAttribute("data-zoom-src"),e.zoomedHd.onerror=function(){clearInterval(w),console.warn("Unable to reach the zoom image target "+e.zoomedHd.src),e.zoomedHd=null,l()};var w=setInterval(function(){e.zoomedHd.complete&&(clearInterval(w),e.zoomedHd.classList.add("medium-zoom-image--opened"),e.zoomedHd.addEventListener("click",z),document.body.appendChild(e.zoomedHd),l())},10)}else if(e.original.hasAttribute("srcset")){e.zoomedHd=e.zoomed.cloneNode(),e.zoomedHd.removeAttribute("sizes"),e.zoomedHd.removeAttribute("loading");var y=e.zoomedHd.addEventListener("load",function(){e.zoomedHd.removeEventListener("load",y),e.zoomedHd.classList.add("medium-zoom-image--opened"),e.zoomedHd.addEventListener("click",z),document.body.appendChild(e.zoomedHd),l()})}else l()})},z=function(){return new i(function(o){if(E||!e.original){o(c);return}var r=function l(){e.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(e.zoomed),e.zoomedHd&&document.body.removeChild(e.zoomedHd),document.body.removeChild(S),e.zoomed.classList.remove("medium-zoom-image--opened"),e.template&&document.body.removeChild(e.template),E=!1,e.zoomed.removeEventListener("transitionend",l),e.original.dispatchEvent(C("medium-zoom:closed",{detail:{zoom:c}})),e.original=null,e.zoomed=null,e.zoomedHd=null,e.template=null,o(c)};E=!0,document.body.classList.remove("medium-zoom--opened"),e.zoomed.style.transform="",e.zoomedHd&&(e.zoomedHd.style.transform=""),e.template&&(e.template.style.transition="opacity 150ms",e.template.style.opacity=0),e.original.dispatchEvent(C("medium-zoom:close",{detail:{zoom:c}})),e.zoomed.addEventListener("transitionend",r)})},D=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=o.target;return e.original?z():U({target:r})},G=function(){return m},J=function(){return g},Q=function(){return e.original},g=[],O=[],E=!1,F=0,m=a,e={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(t)==="[object Object]"?m=t:(t||typeof t=="string")&&A(t),m=b({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},m);var S=Re(m.background);document.addEventListener("click",s),document.addEventListener("keyup",N),document.addEventListener("scroll",I),window.addEventListener("resize",z);var c={open:U,close:z,toggle:D,update:h,clone:R,attach:A,detach:W,on:K,off:X,getOptions:G,getImages:J,getZoomedImage:Q};return c};function ke(n,t){t===void 0&&(t={});var a=t.insertAt;if(!(!n||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",a==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var Me=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";ke(Me);const qe=_e;const Ue={...Ie,setup(){const n=ue(),t=()=>{qe(".main img",{background:"var(--vp-c-bg)"})};Y(()=>{const a=[...document.querySelectorAll("img")];if(!location.hash){t();return}console.debug(`等待图片加载：${a.length}`),Promise.all(a.map(i=>new Promise(s=>{i.complete&&s(),i.onload=()=>s(),i.onerror=()=>s(),i.onabort=()=>s()}))).then(()=>{t();const i=document.querySelector(decodeURIComponent(location.hash));i&&(console.debug(`加载完毕，目标锚点 ${decodeURIComponent(location.hash)}，高度：${i.offsetTop}`),setTimeout(()=>{var s;(s=document.querySelector("html"))==null||s.scrollTo({top:i.offsetTop})},1e3))})}),ce(()=>n.path,()=>pe(()=>t()))}};function V(n){if(n.extends){const t=V(n.extends);return{...t,...n,async enhanceApp(a){t.enhanceApp&&await t.enhanceApp(a),n.enhanceApp&&await n.enhanceApp(a)}}}return n}const L=V(Ue),De=He({name:"VitePressApp",setup(){const{site:n}=Ae();return Y(()=>{Oe(()=>{document.documentElement.lang=n.value.lang,document.documentElement.dir=n.value.dir})}),Se(),Te(),xe(),L.setup&&L.setup(),()=>Pe(L.Layout)}});async function Fe(){const n=$e(),t=Ze();t.provide(ge,n);const a=ve(n.route);return t.provide(he,a),t.component("Content",ze),t.component("ClientOnly",ye),Object.defineProperties(t.config.globalProperties,{$frontmatter:{get(){return a.frontmatter.value}},$params:{get(){return a.page.value.params}}}),L.enhanceApp&&await L.enhanceApp({app:t,router:n,siteData:be}),{app:t,router:n,data:a}}function Ze(){return Ee(De)}function $e(){let n=q,t;return we(a=>{let i=Ce(a),s=null;return i&&(n&&(t=i),(n||t===i)&&(i=i.replace(/\.js$/,".lean.js")),s=Le(()=>import(i),[])),q&&(n=!1),s},L.NotFound)}q&&Fe().then(({app:n,router:t,data:a})=>{t.go().then(()=>{fe(t.route,a.site),n.mount("#app")})});export{Fe as createApp};
